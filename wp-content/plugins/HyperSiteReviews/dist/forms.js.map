{"version":3,"file":"forms.js","sources":["../admin/js/forms.js"],"sourcesContent":["let pages = null;\nlet currentPage = 0;\nlet reviewsPerPage = 10; // Default reviews per page\nlet prevButton = null;\nlet nextButton = null;\n\n// Initialize the form and pagination functionality\ndocument.addEventListener('reviewsInitialized', () => {\n    initializeForm();\n});\n\nfunction initializeForm() {\n    pages = document.querySelectorAll('.reviews-page');\n    prevButton = document.querySelector('.page-prev');\n    nextButton = document.querySelector('.page-next');\n\n    // Initialize selected items\n    window.HSRevData = window.HSRevData || {};\n    window.HSRevData.data = window.HSRevData.data || {};\n    window.HSRevData.data.selectedItems = new Set();\n\n    // Attach event listeners\n    attachEventListeners();\n\n    // Show the initial page\n    showPage(currentPage);\n    showPageReviews(currentPage + 1); // Assuming page indices are 1-based for display\n}\n\nfunction attachEventListeners() {\n    prevButton && prevButton.addEventListener('click', () => changePage(currentPage - 1));\n    nextButton && nextButton.addEventListener('click', () => changePage(currentPage + 1));\n\n    const reviewsPerPageSelect = document.getElementById('reviews-per-page');\n    reviewsPerPageSelect && reviewsPerPageSelect.addEventListener('change', function () {\n        reviewsPerPage = parseInt(this.value, 10);\n        currentPage = 1; // Reset to first page on perPage change\n        showPageReviews(currentPage);\n    });\n\n    if (pages[currentPage]) {\n        attachCheckboxListeners(pages[currentPage]);\n    }\n}\n\nfunction showPage(index) {\n    pages.forEach((page, i) => {\n        page.style.display = i === index ? 'block' : 'none';\n    });\n\n    prevButton.disabled = index === 0;\n    updateButtonState();\n}\n\nfunction changePage(newPage) {\n    const totalPages = Math.ceil(getTotalItems() / reviewsPerPage);\n    if (newPage >= 0 && newPage < totalPages) {\n        currentPage = newPage;\n        showPageReviews(currentPage + 1); // Assuming page indices are 1-based for display\n        updateButtonState();\n    }\n}\n\nfunction updateButtonState() {\n    if (pages) {\n        nextButton.disabled = currentPage === pages.length - 1;\n    }\n}\n\nfunction getTotalItems() {\n    return document.querySelectorAll('.review-row').length;\n}\n\nfunction showPageReviews(page) {\n    const reviewPages = document.querySelectorAll('.reviews-page');\n    reviewPages.forEach((pageElement, index) => {\n        pageElement.style.display = (index + 1 === page) ? 'block' : 'none';\n    });\n\n    updatePaginationControls(getTotalItems(), currentPage + 1, reviewsPerPage);\n}\n\nfunction updatePaginationControls(totalItems, currentPage, itemsPerPage) {\n    const totalPages = Math.ceil(totalItems / itemsPerPage);\n    prevButton.disabled = currentPage <= 1;\n    nextButton.disabled = currentPage >= totalPages;\n}\n\nfunction attachCheckboxListeners(container) {\n    const checkboxes = container.querySelectorAll('input[type=\"checkbox\"]');\n    checkboxes.forEach(cb => {\n        cb.addEventListener('change', onCheckboxChange);\n    });\n}\n\nfunction onCheckboxChange(e) {\n    const clickedCheckbox = e.target;\n    const itemId = clickedCheckbox.value;\n\n    if (clickedCheckbox.checked) {\n        window.HSRevData.data.selectedItems.add(itemId);\n    } else {\n        window.HSRevData.data.selectedItems.delete(itemId);\n    }\n\n    updateHiddenInput();\n    updateButtonState();\n}\n\nfunction updateHiddenInput() {\n    const hiddenInput = document.getElementById('selected_items');\n    if (hiddenInput) {\n        hiddenInput.value = Array.from(window.HSRevData.data.selectedItems).join(',');\n    }\n}\n\nexport { updatePaginationControls, changePage, showPageReviews, updateButtonState };\n"],"names":["pages","currentPage","reviewsPerPage","prevButton","nextButton","initializeForm","attachEventListeners","showPage","showPageReviews","changePage","reviewsPerPageSelect","attachCheckboxListeners","index","page","i","updateButtonState","newPage","totalPages","getTotalItems","pageElement","updatePaginationControls","totalItems","itemsPerPage","container","cb","onCheckboxChange","clickedCheckbox","itemId","updateHiddenInput","hiddenInput"],"mappings":"AAAA,IAAIA,EAAQ,KACRC,EAAc,EACdC,EAAiB,GACjBC,EAAa,KACbC,EAAa,KAGjB,SAAS,iBAAiB,qBAAsB,IAAM,CAClDC,EAAgB,CACpB,CAAC,EAED,SAASA,GAAiB,CACtBL,EAAQ,SAAS,iBAAiB,eAAe,EACjDG,EAAa,SAAS,cAAc,YAAY,EAChDC,EAAa,SAAS,cAAc,YAAY,EAGhD,OAAO,UAAY,OAAO,WAAa,CAAE,EACzC,OAAO,UAAU,KAAO,OAAO,UAAU,MAAQ,CAAE,EACnD,OAAO,UAAU,KAAK,cAAgB,IAAI,IAG1CE,EAAsB,EAGtBC,EAASN,CAAW,EACpBO,EAAgBP,EAAc,CAAC,CACnC,CAEA,SAASK,GAAuB,CAC5BH,GAAcA,EAAW,iBAAiB,QAAS,IAAMM,EAAWR,EAAc,CAAC,CAAC,EACpFG,GAAcA,EAAW,iBAAiB,QAAS,IAAMK,EAAWR,EAAc,CAAC,CAAC,EAEpF,MAAMS,EAAuB,SAAS,eAAe,kBAAkB,EACvEA,GAAwBA,EAAqB,iBAAiB,SAAU,UAAY,CAChFR,EAAiB,SAAS,KAAK,MAAO,EAAE,EACxCD,EAAc,EACdO,EAAgBP,CAAW,CACnC,CAAK,EAEGD,EAAMC,CAAW,GACjBU,EAAwBX,EAAMC,CAAW,CAAC,CAElD,CAEA,SAASM,EAASK,EAAO,CACrBZ,EAAM,QAAQ,CAACa,EAAMC,IAAM,CACvBD,EAAK,MAAM,QAAUC,IAAMF,EAAQ,QAAU,MACrD,CAAK,EAEDT,EAAW,SAAWS,IAAU,EAChCG,EAAmB,CACvB,CAEA,SAASN,EAAWO,EAAS,CACzB,MAAMC,EAAa,KAAK,KAAKC,EAAa,EAAKhB,CAAc,EACzDc,GAAW,GAAKA,EAAUC,IAC1BhB,EAAce,EACdR,EAAgBP,EAAc,CAAC,EAC/Bc,EAAmB,EAE3B,CAEA,SAASA,GAAoB,CACrBf,IACAI,EAAW,SAAWH,IAAgBD,EAAM,OAAS,EAE7D,CAEA,SAASkB,GAAgB,CACrB,OAAO,SAAS,iBAAiB,aAAa,EAAE,MACpD,CAEA,SAASV,EAAgBK,EAAM,CACP,SAAS,iBAAiB,eAAe,EACjD,QAAQ,CAACM,EAAaP,IAAU,CACxCO,EAAY,MAAM,QAAWP,EAAQ,IAAMC,EAAQ,QAAU,MACrE,CAAK,EAEDO,EAAyBF,EAAe,EAAEjB,EAAc,EAAGC,CAAc,CAC7E,CAEA,SAASkB,EAAyBC,EAAYpB,EAAaqB,EAAc,CACrE,MAAML,EAAa,KAAK,KAAKI,EAAaC,CAAY,EACtDnB,EAAW,SAAWF,GAAe,EACrCG,EAAW,SAAWH,GAAegB,CACzC,CAEA,SAASN,EAAwBY,EAAW,CACrBA,EAAU,iBAAiB,wBAAwB,EAC3D,QAAQC,GAAM,CACrBA,EAAG,iBAAiB,SAAUC,CAAgB,CACtD,CAAK,CACL,CAEA,SAASA,EAAiB,EAAG,CACzB,MAAMC,EAAkB,EAAE,OACpBC,EAASD,EAAgB,MAE3BA,EAAgB,QAChB,OAAO,UAAU,KAAK,cAAc,IAAIC,CAAM,EAE9C,OAAO,UAAU,KAAK,cAAc,OAAOA,CAAM,EAGrDC,EAAmB,EACnBb,EAAmB,CACvB,CAEA,SAASa,GAAoB,CACzB,MAAMC,EAAc,SAAS,eAAe,gBAAgB,EACxDA,IACAA,EAAY,MAAQ,MAAM,KAAK,OAAO,UAAU,KAAK,aAAa,EAAE,KAAK,GAAG,EAEpF"}