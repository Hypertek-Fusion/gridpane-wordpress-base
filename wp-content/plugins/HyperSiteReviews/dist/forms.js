let n=null,t=0,h=10,u=null,i=null;document.addEventListener("reviewsInitialized",()=>{new URLSearchParams(document.location.search).get("page")==="hypersite-reviews-setup"?n=document.querySelectorAll(".setup-page"):n=document.querySelectorAll(".reviews-page"),u=document.querySelector(".page-prev"),i=document.querySelector(".page-next"),window.HSRevData=window.HSRevData||{},window.HSRevData.functions=window.HSRevData.functions||{},window.HSRevData.data=window.HSRevData.data||{},window.HSRevData.data.selectedReviews=new Set;const c=document.querySelector("form");c.addEventListener("submit",e=>{e.preventDefault(),submitForm()});const s=()=>{const e=n[0].querySelector('input[type="checkbox"]:checked');return e?e.closest(".row-item").dataset.accountId:null},d=()=>{const e=n[1].querySelector('input[type="checkbox"]:checked');return e?e.closest(".row-item").dataset.locationId:null},S=e=>{e.querySelectorAll('input[type="checkbox"]').forEach(w=>{w.addEventListener("change",H=>{const R=H.target,m=R.value;R.checked?window.HSRevData.data.selectedReviews.add(m):window.HSRevData.data.selectedReviews.delete(m),y(),g()})})},r=e=>{n.forEach((l,w)=>{l.style.display=w===e?"block":"none"}),u.disabled=e===0,g()};r(t),u.addEventListener("click",()=>{t>0&&(t--,r(t))}),i.addEventListener("click",()=>{if(t<n.length-1&&p()){if(t===0){const e=s();e&&window.HSRevData.functions.getLocations&&(window.HSRevData.data.accountId!==e&&(console.log("Account changed, clearing location cache"),window.HSRevData.data.locationsCache={}),window.HSRevData.functions.getLocations(e),window.HSRevData.data.accountId=e,console.log(`Account ID set: ${e}`))}else if(t===1){const e=d();e&&window.HSRevData.functions.prefetchReviews&&(window.HSRevData.data.locationId!==e&&(console.log("Location changed, clearing review cache"),window.HSRevData.data.reviewsCache={}),window.HSRevData.functions.prefetchReviews(e),window.HSRevData.data.locationId=e,console.log(`Location ID set: ${e}`))}t++,r(t)}else t===2&&p()&&c.submit()}),window.HSRevData&&window.HSRevData.functions&&(window.HSRevData.functions.attachCheckboxListeners=S,window.HSRevData.functions.selectAllReviews=b),n[t]&&S(n[t]);const D=document.getElementById("reviews-per-page"),f=e=>{const l=Math.ceil(k()/h);e>0&&e<=l&&(t=e,v(t))};document.getElementById("page-prev").addEventListener("click",()=>f(t-1)),document.getElementById("page-next").addEventListener("click",()=>f(t+1)),D.addEventListener("change",function(){h=parseInt(this.value,10),t=1,v(t)}),v(t)});const I=(a,o,c)=>{const s=Math.ceil(a/c);document.getElementById("page-prev").disabled=o<=1,document.getElementById("page-next").disabled=o>=s},v=a=>{document.querySelectorAll(".reviews-page").forEach((c,s)=>{c.style.display=s+1===a?"block":"none"}),I(k(),t,h)},k=()=>document.querySelectorAll(".review-row").length,b=a=>{const o=n[t].querySelectorAll('input[name*="selected-review-"][type="checkbox"]'),c=window.HSRevData.data.locationId;window.HSRevData.data.reviewsCache[c],Array.from(o).forEach(s=>{const d=s.value;s.checked=a.checked,a.checked?window.HSRevData.data.selectedReviews.add(d):window.HSRevData.data.selectedReviews.delete(d)}),y(),g()},y=()=>{const a=document.getElementById("selected_reviews"),o=Array.from(window.HSRevData.data.selectedReviews).filter(c=>c.startsWith("AbFvOq"));a.value=o.join(",")},g=()=>{t!==2?i.innerText="Next Page":i.innerText="Submit",i.disabled=!p()},p=()=>{console.log(n);const a=n[t].querySelectorAll('input:not([name="select-all-reviews"])[type="checkbox"]');return Array.from(a).some(o=>o.checked)};export{g as a,v as s,I as u};
//# sourceMappingURL=forms.js.map
