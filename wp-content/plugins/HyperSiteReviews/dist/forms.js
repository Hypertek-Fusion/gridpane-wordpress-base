document.addEventListener("DOMContentLoaded",()=>{const n=document.querySelectorAll(".setup-page")||document.querySelectorAll(".reviews-page");console.log(n);const d=document.querySelector(".page-prev"),a=document.querySelector(".page-next");let t=0,v=10;window.HSRevData=window.HSRevData||{},window.HSRevData.functions=window.HSRevData.functions||{},window.HSRevData.data=window.HSRevData.data||{},window.HSRevData.data.selectedReviews=new Set;const h=document.querySelector("form");h.addEventListener("submit",e=>{e.preventDefault(),submitForm()});const l=()=>{const e=n[t].querySelectorAll('input:not([name="select-all-reviews"])[type="checkbox"]');return Array.from(e).some(o=>o.checked)},R=e=>{const o=n[t].querySelectorAll('input[name*="selected-review-"][type="checkbox"]'),c=window.HSRevData.data.locationId;window.HSRevData.data.reviewsCache[c],Array.from(o).forEach(i=>{const s=i.value;i.checked=e.checked,e.checked?window.HSRevData.data.selectedReviews.add(s):window.HSRevData.data.selectedReviews.delete(s)}),g(),r()},g=()=>{const e=document.getElementById("selected_reviews"),o=Array.from(window.HSRevData.data.selectedReviews).filter(c=>c.startsWith("AbFvOq"));e.value=o.join(",")},m=()=>{const e=n[0].querySelector('input[type="checkbox"]:checked');return e?e.closest(".row-item").dataset.accountId:null},k=()=>{const e=n[1].querySelector('input[type="checkbox"]:checked');return e?e.closest(".row-item").dataset.locationId:null},r=()=>{t!==2?a.innerText="Next Page":a.innerText="Submit",a.disabled=!l()},S=e=>{e.querySelectorAll('input[type="checkbox"]').forEach(c=>{c.addEventListener("change",i=>{const s=i.target,p=s.value;s.checked?window.HSRevData.data.selectedReviews.add(p):window.HSRevData.data.selectedReviews.delete(p),g(),r()})})},w=e=>{n.forEach((o,c)=>{o.style.display=c===e?"block":"none"}),d.disabled=e===0,r()};w(t),d.addEventListener("click",()=>{t>0&&(t--,w(t))}),a.addEventListener("click",()=>{if(t<n.length-1&&l()){if(t===0){const e=m();e&&window.HSRevData.functions.getLocations&&(window.HSRevData.data.accountId!==e&&(console.log("Account changed, clearing location cache"),window.HSRevData.data.locationsCache={}),window.HSRevData.functions.getLocations(e),window.HSRevData.data.accountId=e,console.log(`Account ID set: ${e}`))}else if(t===1){const e=k();e&&window.HSRevData.functions.prefetchReviews&&(window.HSRevData.data.locationId!==e&&(console.log("Location changed, clearing review cache"),window.HSRevData.data.reviewsCache={}),window.HSRevData.functions.prefetchReviews(e),window.HSRevData.data.locationId=e,console.log(`Location ID set: ${e}`))}t++,w(t)}else t===2&&l()&&h.submit()}),window.HSRevData&&window.HSRevData.functions&&(window.HSRevData.functions.attachCheckboxListeners=S,window.HSRevData.functions.selectAllReviews=R),n[t]&&S(n[t]);const D=document.getElementById("reviews-per-page"),f=e=>{const o=Math.ceil(y()/v);e>0&&e<=o&&(t=e,u(t))},y=()=>document.querySelectorAll(".review-row").length;document.getElementById("page-prev").addEventListener("click",()=>f(t-1)),document.getElementById("page-next").addEventListener("click",()=>f(t+1)),D.addEventListener("change",function(){v=parseInt(this.value,10),t=1,u(t)}),u(t)});const H=(n,d,a)=>{const t=Math.ceil(n/a);document.getElementById("page-prev").disabled=d<=1,document.getElementById("page-next").disabled=d>=t},u=n=>{document.querySelectorAll(".reviews-page").forEach((a,t)=>{a.style.display=t+1===n?"block":"none"}),H(getTotalItems(),currentPage,reviewsPerPage)};export{u as s,H as u};
//# sourceMappingURL=forms.js.map
