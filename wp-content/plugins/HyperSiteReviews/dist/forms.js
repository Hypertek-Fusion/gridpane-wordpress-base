document.addEventListener("DOMContentLoaded",()=>{const n=document.querySelectorAll(".setup-page")||document.querySelectorAll(".reviews-page");console.log(n);const a=document.querySelector(".page-prev"),o=document.querySelector(".page-next");let t=0,c=10;window.HSRevData=window.HSRevData||{},window.HSRevData.functions=window.HSRevData.functions||{},window.HSRevData.data=window.HSRevData.data||{},window.HSRevData.data.selectedReviews=new Set;const u=document.querySelector("form");u.addEventListener("submit",e=>{e.preventDefault(),submitForm()});const R=()=>{const e=n[0].querySelector('input[type="checkbox"]:checked');return e?e.closest(".row-item").dataset.accountId:null},m=()=>{const e=n[1].querySelector('input[type="checkbox"]:checked');return e?e.closest(".row-item").dataset.locationId:null},v=e=>{e.querySelectorAll('input[type="checkbox"]').forEach(i=>{i.addEventListener("change",D=>{const h=D.target,S=h.value;h.checked?window.HSRevData.data.selectedReviews.add(S):window.HSRevData.data.selectedReviews.delete(S),f(),r()})})},d=e=>{n.forEach((s,i)=>{s.style.display=i===e?"block":"none"}),a.disabled=e===0,r()};d(t),a.addEventListener("click",()=>{t>0&&(t--,d(t))}),o.addEventListener("click",()=>{if(t<n.length-1&&w()){if(t===0){const e=R();e&&window.HSRevData.functions.getLocations&&(window.HSRevData.data.accountId!==e&&(console.log("Account changed, clearing location cache"),window.HSRevData.data.locationsCache={}),window.HSRevData.functions.getLocations(e),window.HSRevData.data.accountId=e,console.log(`Account ID set: ${e}`))}else if(t===1){const e=m();e&&window.HSRevData.functions.prefetchReviews&&(window.HSRevData.data.locationId!==e&&(console.log("Location changed, clearing review cache"),window.HSRevData.data.reviewsCache={}),window.HSRevData.functions.prefetchReviews(e),window.HSRevData.data.locationId=e,console.log(`Location ID set: ${e}`))}t++,d(t)}else t===2&&w()&&u.submit()}),window.HSRevData&&window.HSRevData.functions&&(window.HSRevData.functions.attachCheckboxListeners=v,window.HSRevData.functions.selectAllReviews=H),n[t]&&v(n[t]);const k=document.getElementById("reviews-per-page"),g=e=>{const s=Math.ceil(p()/c);e>0&&e<=s&&(t=e,l(t))};document.getElementById("page-prev").addEventListener("click",()=>g(t-1)),document.getElementById("page-next").addEventListener("click",()=>g(t+1)),k.addEventListener("change",function(){c=parseInt(this.value,10),t=1,l(t)}),l(t)});const y=(n,a,o)=>{const t=Math.ceil(n/o);document.getElementById("page-prev").disabled=a<=1,document.getElementById("page-next").disabled=a>=t},l=n=>{document.querySelectorAll(".reviews-page").forEach((o,t)=>{o.style.display=t+1===n?"block":"none"}),y(p(),currentPage,reviewsPerPage)},p=()=>document.querySelectorAll(".review-row").length,H=n=>{const a=pages[currentPage].querySelectorAll('input[name*="selected-review-"][type="checkbox"]'),o=window.HSRevData.data.locationId;window.HSRevData.data.reviewsCache[o],Array.from(a).forEach(t=>{const c=t.value;t.checked=n.checked,n.checked?window.HSRevData.data.selectedReviews.add(c):window.HSRevData.data.selectedReviews.delete(c)}),f(),r()},f=()=>{const n=document.getElementById("selected_reviews"),a=Array.from(window.HSRevData.data.selectedReviews).filter(o=>o.startsWith("AbFvOq"));n.value=a.join(",")},r=()=>{currentPage!==2?nextButton.innerText="Next Page":nextButton.innerText="Submit",nextButton.disabled=!w()},w=()=>{const n=pages[currentPage].querySelectorAll('input:not([name="select-all-reviews"])[type="checkbox"]');return Array.from(n).some(a=>a.checked)};export{l as s,y as u};
//# sourceMappingURL=forms.js.map
