let o=null,t=0,v=10,w=null,s=null;document.addEventListener("DOMContentLoaded",()=>{o=document.querySelectorAll(".setup-page")||document.querySelectorAll(".reviews-page"),console.log(o),w=document.querySelector(".page-prev"),s=document.querySelector(".page-next"),window.HSRevData=window.HSRevData||{},window.HSRevData.functions=window.HSRevData.functions||{},window.HSRevData.data=window.HSRevData.data||{},window.HSRevData.data.selectedReviews=new Set;const n=document.querySelector("form");n.addEventListener("submit",e=>{e.preventDefault(),submitForm()});const a=()=>{const e=o[0].querySelector('input[type="checkbox"]:checked');return e?e.closest(".row-item").dataset.accountId:null},c=()=>{const e=o[1].querySelector('input[type="checkbox"]:checked');return e?e.closest(".row-item").dataset.locationId:null},d=e=>{e.querySelectorAll('input[type="checkbox"]').forEach(r=>{r.addEventListener("change",D=>{const f=D.target,p=f.value;f.checked?window.HSRevData.data.selectedReviews.add(p):window.HSRevData.data.selectedReviews.delete(p),m(),h()})})},i=e=>{o.forEach((l,r)=>{l.style.display=r===e?"block":"none"}),w.disabled=e===0,h()};i(t),w.addEventListener("click",()=>{t>0&&(t--,i(t))}),s.addEventListener("click",()=>{if(t<o.length-1&&g()){if(t===0){const e=a();e&&window.HSRevData.functions.getLocations&&(window.HSRevData.data.accountId!==e&&(console.log("Account changed, clearing location cache"),window.HSRevData.data.locationsCache={}),window.HSRevData.functions.getLocations(e),window.HSRevData.data.accountId=e,console.log(`Account ID set: ${e}`))}else if(t===1){const e=c();e&&window.HSRevData.functions.prefetchReviews&&(window.HSRevData.data.locationId!==e&&(console.log("Location changed, clearing review cache"),window.HSRevData.data.reviewsCache={}),window.HSRevData.functions.prefetchReviews(e),window.HSRevData.data.locationId=e,console.log(`Location ID set: ${e}`))}t++,i(t)}else t===2&&g()&&n.submit()}),window.HSRevData&&window.HSRevData.functions&&(window.HSRevData.functions.attachCheckboxListeners=d,window.HSRevData.functions.selectAllReviews=H),o[t]&&d(o[t]);const k=document.getElementById("reviews-per-page"),S=e=>{const l=Math.ceil(R()/v);e>0&&e<=l&&(t=e,u(t))};document.getElementById("page-prev").addEventListener("click",()=>S(t-1)),document.getElementById("page-next").addEventListener("click",()=>S(t+1)),k.addEventListener("change",function(){v=parseInt(this.value,10),t=1,u(t)}),u(t)});const y=(n,a,c)=>{const d=Math.ceil(n/c);document.getElementById("page-prev").disabled=a<=1,document.getElementById("page-next").disabled=a>=d},u=n=>{document.querySelectorAll(".reviews-page").forEach((c,d)=>{c.style.display=d+1===n?"block":"none"}),y(R(),t,v)},R=()=>document.querySelectorAll(".review-row").length,H=n=>{const a=o[t].querySelectorAll('input[name*="selected-review-"][type="checkbox"]'),c=window.HSRevData.data.locationId;window.HSRevData.data.reviewsCache[c],Array.from(a).forEach(d=>{const i=d.value;d.checked=n.checked,n.checked?window.HSRevData.data.selectedReviews.add(i):window.HSRevData.data.selectedReviews.delete(i)}),m(),h()},m=()=>{const n=document.getElementById("selected_reviews"),a=Array.from(window.HSRevData.data.selectedReviews).filter(c=>c.startsWith("AbFvOq"));n.value=a.join(",")},h=()=>{t!==2?s.innerText="Next Page":s.innerText="Submit",s.disabled=!g()},g=()=>{const n=o[t].querySelectorAll('input:not([name="select-all-reviews"])[type="checkbox"]');return Array.from(n).some(a=>a.checked)};export{u as s,y as u};
//# sourceMappingURL=forms.js.map
