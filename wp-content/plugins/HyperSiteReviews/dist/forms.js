let n=null,t=0,v=10,w=null,d=null;const h=()=>new URLSearchParams(document.location.search).get("page")==="hypersite-reviews-setup";document.addEventListener("reviewsInitialized",()=>{h()?n=document.querySelectorAll(".setup-page"):n=document.querySelectorAll(".reviews-page"),w=document.querySelector(".page-prev"),d=document.querySelector(".page-next"),window.HSRevData=window.HSRevData||{},window.HSRevData.functions=window.HSRevData.functions||{},window.HSRevData.data=window.HSRevData.data||{},window.HSRevData.data.selectedReviews=new Set;const a=document.querySelector("form");a.addEventListener("submit",e=>{e.preventDefault(),submitForm()});const o=()=>{const e=n[0].querySelector('input[type="checkbox"]:checked');return e?e.closest(".row-item").dataset.accountId:null},c=()=>{const e=n[1].querySelector('input[type="checkbox"]:checked');return e?e.closest(".row-item").dataset.locationId:null},i=e=>{e.querySelectorAll('input[type="checkbox"]').forEach(r=>{r.addEventListener("change",D=>{const f=D.target,R=f.value;f.checked?window.HSRevData.data.selectedReviews.add(R):window.HSRevData.data.selectedReviews.delete(R),k(),g()})})},s=e=>{n.forEach((l,r)=>{l.style.display=r===e?"block":"none"}),w.disabled=e===0,g()};s(t),w.addEventListener("click",()=>{t>0&&(t--,s(t))}),d.addEventListener("click",()=>{if(h())if(t<n.length-1&&S()){if(t===0){const e=o();e&&window.HSRevData.functions.getLocations&&(window.HSRevData.data.accountId!==e&&(console.log("Account changed, clearing location cache"),window.HSRevData.data.locationsCache={}),window.HSRevData.functions.getLocations(e),window.HSRevData.data.accountId=e,console.log(`Account ID set: ${e}`))}else if(t===1){const e=c();e&&window.HSRevData.functions.prefetchReviews&&(window.HSRevData.data.locationId!==e&&(console.log("Location changed, clearing review cache"),window.HSRevData.data.reviewsCache={}),window.HSRevData.functions.prefetchReviews(e),window.HSRevData.data.locationId=e,console.log(`Location ID set: ${e}`))}t++,s(t)}else t===2&&S()&&a.submit();else t++,s(t)}),window.HSRevData&&window.HSRevData.functions&&(window.HSRevData.functions.attachCheckboxListeners=i,window.HSRevData.functions.selectAllReviews=I),n[t]&&i(n[t]);const y=document.getElementById("reviews-per-page"),p=e=>{const l=Math.ceil(m()/v);e>0&&e<=l&&(t=e,u(t))};document.getElementById("page-prev").addEventListener("click",()=>p(t-1)),document.getElementById("page-next").addEventListener("click",()=>p(t+1)),y.addEventListener("change",function(){v=parseInt(this.value,10),t=1,u(t)}),u(t)});const H=(a,o,c)=>{const i=Math.ceil(a/c);document.getElementById("page-prev").disabled=o<=1,document.getElementById("page-next").disabled=o>=i},u=a=>{document.querySelectorAll(".reviews-page").forEach((c,i)=>{c.style.display=i+1===a?"block":"none"}),H(m(),t,v)},m=()=>document.querySelectorAll(".review-row").length,I=a=>{const o=n[t].querySelectorAll('input[name*="selected-review-"][type="checkbox"]'),c=window.HSRevData.data.locationId;window.HSRevData.data.reviewsCache[c],Array.from(o).forEach(i=>{const s=i.value;i.checked=a.checked,a.checked?window.HSRevData.data.selectedReviews.add(s):window.HSRevData.data.selectedReviews.delete(s)}),k(),g()},k=()=>{const a=document.getElementById("selected_reviews"),o=Array.from(window.HSRevData.data.selectedReviews).filter(c=>c.startsWith("AbFvOq"));a.value=o.join(",")},g=()=>{h?(t!==2?d.innerText="Next Page":d.innerText="Submit",d.disabled=!S()):d.disabled=t===n.length-1},S=()=>{console.log(n);const a=n[t].querySelectorAll('input:not([name="select-all-reviews"])[type="checkbox"]');return Array.from(a).some(o=>o.checked)};export{g as a,u as s,H as u};
//# sourceMappingURL=forms.js.map
