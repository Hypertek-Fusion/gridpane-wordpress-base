import{u as g,s as h,a as _}from"./forms.js";const y=new Event("reviewsInitialized");document.addEventListener("DOMContentLoaded",async()=>{const v=()=>new Promise(async(o,s)=>{const e=await fetch(window.HSRevApi.urls.selectedLocation,{method:"GET",headers:{"Content-Type":"application/json","X-WP-Nonce":HSRevApi.nonce}});e.ok||s("Network response was not ok "+e.statusText);const t=await e.json();o(t)}),p=(o,s=1)=>new Promise(async(e,t)=>{let d=[],a=1;do{const c=await fetch(window.HSRevApi.urls.locationReviewsBase.replace("locations/%s",o)+"?"+new URLSearchParams({per_page:100,page:s}),{method:"GET",headers:{"Content-Type":"application/json","X-WP-Nonce":HSRevApi.nonce}});c.ok||t("Network response was not ok "+c.statusText);const n=await c.json();a=n.total_pages,n.reviews.forEach(r=>{d.push(r)}),s++}while(s<=a);e(d)}),w=document.getElementById("initial-reviews"),m=document.getElementById("reviews-table"),u=document.getElementById("reviews-per-page");if(window.HSRevApi)try{const s=(await v()).location_id,e=await p(s),t=parseInt(u.selectedOptions[0].value,10);console.log(e),w.innerHTML="";const d=Math.ceil(e.length/t);for(let a=0;a<d;a++){const c=a===0,n=c?w:document.createElement("div"),r=document.createElement("div");r.classList.add("rows"),n.setAttribute("data-page",a+1),n.classList.add("reviews-page");for(let l=0;l<t;l++){const i=e[a*t+l];i&&(r.innerHTML+=`
                        <div class="row-item review-row">
                            <input type="checkbox" name="selected-review-${i.review_id}" value="${i.review_id}" ${parseInt(i.is_selected)?"checked":""}>
                            <div class="row-item__cell" data-type="reviewer">${i.reviewer_display_name}</div>
                            <div class="row-item__cell" data-type="rating">${i.star_rating}</div>
                            <div class="row-item__cell" data-type="comment">${i.comment}</div>
                            <div class="row-item__cell" data-type="date">${new Date(i.create_time).toLocaleDateString()}</div>
                        </div>
                    `,n.appendChild(r))}c||m.appendChild(n)}document.dispatchEvent(y),g(e.length,1,t),h(1),_()}catch(o){console.error("Error with promise: ",o)}});
//# sourceMappingURL=mainPage.js.map
