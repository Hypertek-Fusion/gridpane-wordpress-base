import{j as e,u as t}from"./fields-Cqw4NA-S.js";import{a as g,R as A,u as Te,h as Fe}from"./vendor-D21mNUGX.js";import{u as R,a as L,b as F,g as se,c as we,F as Ee}from"./index.esm-CunHohLK.js";import{u as S,B as C,s as y,bA as ke,bB as te,P as b,bC as Ae,I as E,G as Ie,v as V,bD as le,A as qe,a as k,bE as ae,bF as ne,bG as ie,bH as $,ab as B,an as Oe,bI as Le,bJ as Me,bK as re,be as Pe,bk as Ve,m as $e,c as Ue,bL as _e,bM as Be,L as We,i as Ge,bN as Ye}from"./index-DxCcoVgy.js";import{n as P,b as U,u as ee,B as He,L as Je}from"./Layout-DCNQQmUm.js";import{M as _}from"./index-Dp8I9ahT.js";import{P as ze}from"./index-CP6v-V9Q.js";import{I as W}from"./InputHidden-D-OSbUvk.js";import{u as oe}from"./index-DRV1MUeg.js";import{S as G}from"./index-DYn0t4Hl.js";import{u as Y,C as H,a as de}from"./sortable.esm-C-GypyhB.js";import{L as M}from"./Label-DD1DoJkn.js";import{S as ce}from"./Select-DQFFBRh5.js";import{I as q}from"./Input-CuPRbCrx.js";import{T as O}from"./index-XHH1WL2a.js";import{M as ue}from"./index-Dx-NZAGb.js";import{B as Ke}from"./ButtonSwitch-DDjyTOqf.js";import"./index-Cwt3Qm9G.js";const Xe=()=>{const s=S(),{setValue:c}=R(),[u,r]=g.useState(!1),i=[e.jsx(C,{style:y.SUCCESS,onClick:o=>{o.preventDefault(),s(ke()),s(te()),c("fields",[]),r(!u)},children:t("Yes")}),e.jsx(C,{style:y.DANGER,onClick:o=>{o.preventDefault(),r(!u)},children:t("No")})];return e.jsxs(A.Fragment,{children:[e.jsx(_,{title:t("Confirm deleting all"),visible:u,buttons:i,children:t("Are you sure?")}),e.jsx(C,{style:y.DANGER,onClick:o=>{o.preventDefault(),r(!u)},children:t("Delete all")})]})},Qe="Checkbox",Ze="Color",es="Date",ss="DateTime",ts="Email",ls="Number",as="Phone",ns="PostObject",is="PostObjectMulti",me="Radio",he="Select",pe="SelectMulti",rs="TermObject",os="TermObjectMulti",J="Text",ds="Textarea",cs="Time",us="Url",ms="User",hs="UserMulti",xe=[{value:J,label:"Text"},{value:Ze,label:"Color"},{value:es,label:"Date"},{value:ss,label:"DateTime"},{value:ts,label:"Email"},{value:ls,label:"Number"},{value:as,label:"Phone"},{value:cs,label:"Time"},{value:us,label:"Url"},{value:ds,label:"Textarea"},{value:he,label:"Select"},{value:pe,label:"Select (Multiple)"},{value:Qe,label:"Checkbox"},{value:me,label:"Radio"},{value:ns,label:"Post object"},{value:is,label:"Post object (Multiple)"},{value:rs,label:"Term object"},{value:os,label:"Term object (Multiple)"},{value:ms,label:"User"},{value:hs,label:"User (Multiple)"}],fe=({fieldIndex:s,optionIndex:c})=>{const u=S(),r=()=>`fields.${s}.options`,{control:i}=R(),{remove:o}=L({control:i,name:r()}),[f,p]=g.useState(!1),a=[e.jsx(C,{style:y.SUCCESS,onClick:n=>{n.preventDefault(),u(Ae({fieldIndex:s,optionIndex:c})),o(c),p(!f)},children:t("Yes")}),e.jsx(C,{style:y.DANGER,onClick:n=>{n.preventDefault(),p(!f)},children:t("No")})];return e.jsxs("span",{children:[e.jsx(_,{title:t("Confirm deleting option"),visible:f,buttons:a,children:t("Are you sure?")}),e.jsx("a",{href:"#",onClick:n=>{n.preventDefault(),p(!f)},children:e.jsx(O,{icon:!1,tip:t("Delete"),label:e.jsx(E,{icon:"bx-trash",width:18,color:"#F94144"})})})]})};fe.propTypes={fieldIndex:b.number.isRequired,optionIndex:b.number.isRequired};const be=g.memo(({index:s,fieldIndex:c,fieldId:u,option:r})=>{const i=j=>`fields.${c}.options.${s}.${j}`,{register:o,formState:{errors:f},control:p,setValue:a}=R(),n=F({control:p,name:i("value")}),m=F({control:p,name:i("label")}),{attributes:v,listeners:h,setNodeRef:l,transform:d}=Y({id:r.id}),x={transform:H.Translate.toString(d)},[D,T]=g.useState(r.label===r.value),w=()=>n||(r.value?r.value:null),N=()=>m||(r.label?r.label:null);return e.jsxs("div",{className:"i-flex-center s-8",style:x,ref:l,children:[e.jsx(W,{id:i("id"),value:r.id,register:o}),e.jsx("span",{className:"cursor-move top-2 handle",...v,...h,children:e.jsx(E,{icon:"bx:dots-vertical-rounded",color:"#777",width:18})}),e.jsxs("span",{className:"i-flex-center s-24 w-100",children:[e.jsx("span",{className:"w-100",children:e.jsx(q,{id:i("label"),register:o,errors:f,defaultValue:N(),onChangeCapture:j=>{D&&a(i("value"),j.target.value)},onClick:j=>{r.label&&j.target.value==="option"&&a(i("label"),null)},validate:{required:t("This field is mandatory"),maxLength:{value:255,message:"max length is 255"}}})}),e.jsx("span",{children:e.jsx("button",{type:"button",className:`acpt-btn-switch ${D?"active":""}`,onClick:j=>{j.preventDefault(),T(!D)},children:e.jsx(E,{icon:"bx:bx-link",width:"18px"})})}),e.jsx("span",{className:"w-100",children:e.jsx(q,{id:i("value"),register:o,errors:f,defaultValue:w(),onChangeCapture:j=>{D&&a(i("label"),j.target.value)},onClick:j=>{r.value&&j.target.value==="option"&&a(i("value"),null)},validate:{required:t("This field is mandatory"),maxLength:{value:255,message:"max length is 255"}}})}),e.jsx(fe,{fieldIndex:c,optionIndex:s})]})]})});be.propTypes={fieldId:b.string.isRequired,index:b.number.isRequired,fieldIndex:b.number.isRequired,option:b.object.isRequired};const je=({fieldId:s,fieldIndex:c})=>{const u=S(),[r,i]=g.useState(!1),[o,f]=g.useState(null),[p,a]=g.useState(null),[n,m]=g.useState(!1);g.useEffect(()=>{n&&(i(!0),Ie("fetchDatasetsAction",{}).then(l=>{let d=[{value:null,label:t("Select"),items:[]}];l.records&&l.records.map(x=>{d.push({value:x.id,label:x.label?x.label:x.name,items:x.items?x.items:[]})}),f(d),i(!1)}).catch(l=>{console.error(l.message),i(!1)}))},[n]);const v=()=>{const l=o.filter(x=>x.value===p);if(l.length!==1)return;l[0].items.map(x=>{const D={id:V(),fieldId:s,label:x.label,value:x.value};u(le({fieldIndex:c,option:D}))}),P.success(t("Dataset loaded correctly")),m(!n)},h=[e.jsx(C,{style:y.PRIMARY,disabled:p===null,onClick:l=>{l.preventDefault(),v()},children:t("Load dataset")}),e.jsx(C,{style:y.DANGER,onClick:l=>{l.preventDefault(),m(!n)},children:t("Close")})];return e.jsxs(A.Fragment,{children:[e.jsx(_,{title:t("Load dataset"),visible:n,padding:0,buttons:h,children:r?e.jsx("div",{className:"p-24",children:t("Loading...")}):e.jsx("div",{className:"p-24",children:e.jsx("select",{id:"dataset",className:"form-control default",onChangeCapture:l=>a(l.target.value),children:o&&o.map(l=>e.jsx("option",{value:l.value,children:l.label}))})})}),e.jsx("a",{href:"#",onClick:l=>{l.preventDefault(),m(!n)},children:t("Load dataset")})]})};je.propTypes={fieldId:b.string.isRequired,fieldIndex:b.number.isRequired};const ve=({fieldId:s,fieldIndex:c,options:u})=>{const r=S(),i=()=>`fields.${c}.options`,{control:o}=R(),{move:f}=L({control:o,name:i()}),p=n=>{const{active:m,over:v}=n;if(m.id===v.id)return;const h=u.findIndex(d=>d.id===m.id),l=u.findIndex(d=>d.id===v.id);f(h,l)},a=()=>{const n={id:V(),fieldId:s,label:"option",value:"option"};r(le({fieldIndex:c,option:n}))};return e.jsx("div",{children:e.jsxs("fieldset",{className:"acpt-fieldset",children:[e.jsx("legend",{children:t("Option list")}),u&&u.length>0?e.jsx(G,{onDragEnd:p,items:u,children:e.jsx("div",{className:"flex-column s-24",children:u&&u.map((n,m)=>e.jsx(be,{index:m,fieldIndex:c,fieldId:s,option:n}))})}):e.jsx(qe,{style:y.WARNING,children:t('No options already created. Create the first one now by clicking the button "Add option"!')}),e.jsxs("div",{className:"i-flex-center s-8 mt-24",children:[e.jsx("a",{href:"#",onClick:n=>{n.preventDefault(),a()},children:t("Add option")}),e.jsx(je,{fieldId:s,fieldIndex:c})]})]})})};ve.propTypes={fieldId:b.string.isRequired,fieldIndex:b.number.isRequired,options:b.array.isRequired};const z=({element:s})=>{const c=S(),{selectedElements:u}=k(i=>i.productDataFieldsState),r=()=>u.filter(o=>o.id===s.id).length>0;return e.jsx(O,{label:e.jsxs("label",{className:"checkbox",htmlFor:`select-${s.id}`,style:{top:"3px"},children:[e.jsx("input",{id:`select-${s.id}`,type:"checkbox",checked:r(),onChange:i=>{c(ae({element:s,selected:i.target.checked}))}}),e.jsx("span",{})]}),icon:!1,tip:t(r()?"Deselect this element":"Select this element")})};z.propTypes={element:b.object.isRequired};const ge=({field:s,index:c})=>{const u=S(),{control:r}=R(),{remove:i}=L({control:r,name:"fields"}),[o,f]=g.useState(!1),p=[e.jsx(C,{style:y.SUCCESS,onClick:a=>{a.preventDefault(),u(ne({field:s})),i(c),f(!o)},children:t("Yes")}),e.jsx(C,{style:y.DANGER,onClick:a=>{a.preventDefault(),f(!o)},children:t("No")})];return e.jsxs(A.Fragment,{children:[e.jsx(_,{title:t("Confirm deleting option"),visible:o,buttons:p,children:t("Are you sure?")}),e.jsx("a",{href:"#",onClick:a=>{a.preventDefault(),f(!o)},children:e.jsx(E,{icon:"bx-trash",width:18,color:"#F94144"})})]})};ge.propTypes={index:b.number.isRequired,field:b.object.isRequired};const K=({field:s,index:c})=>{const u=S(),{closedElements:r}=k(a=>a.productDataFieldsState),{control:i}=R(),{append:o}=L({control:i,name:"fields"}),f=()=>r.filter(n=>n===s.id).length===1,p=()=>{Oe(s.id),f()?u(Le({id:s.id})):u(Me({id:s.id}))};return e.jsxs("span",{className:"i-flex-center s-8",children:[e.jsx(O,{label:e.jsx("a",{href:"#",onClick:a=>{a.preventDefault();const n=ie(s);u($({field:n})),o(n),B(1).then(()=>{U(n.id)})},children:e.jsx(E,{icon:"bx:duplicate",width:18})}),tip:t("Duplicate this meta field"),icon:!1}),e.jsx(O,{label:e.jsx(ge,{index:c,field:s}),tip:t("Delete this meta field"),icon:!1}),e.jsx(O,{label:e.jsx("a",{href:"#",onClick:a=>{a.preventDefault(),p()},children:e.jsx(E,{icon:"bx:expand-alt",width:18})}),tip:t("Hide/show this meta field"),icon:!1})]})};K.propTypes={index:b.number.isRequired,field:b.object.isRequired};const Ne=({field:s,index:c})=>{const{attributes:u,listeners:r,setNodeRef:i,isDragging:o,transform:f}=Y({id:s.id}),p={transform:H.Translate.toString(f)};S(),k(N=>N.productDataFieldsState);const{register:a,formState:{errors:n},control:m,setValue:v}=R(),h=N=>`fields.${c}.${N}`,l=F({control:m,name:h("name")}),d=F({control:m,name:h("type")}),x=F({control:m,name:h("isRequired")}),D=()=>{const N=h("name"),j=se(n,N);return j?e.jsx("span",{className:"invalid-feedback",children:t(j.message)}):l||s.name},T=()=>d||s.type,w=N=>N===he||N===pe||N===me;return e.jsx("tr",{id:s.id,ref:i,style:p,className:`bg-white ${o?"b-rounded z-100 with-drop-shadow":""}`,children:e.jsxs("td",{style:{background:"#eff6fc3b"},className:"with-active-border",colSpan:4,children:[e.jsx(W,{id:h("id"),value:s.id,register:a}),e.jsx("div",{className:"mb-24",children:e.jsxs("div",{className:"flex-between s-8 for-xs",children:[e.jsxs("span",{className:"i-flex-center s-8",children:[e.jsx("span",{className:"cursor-move top-2 handle",...u,...r,children:e.jsx(E,{icon:"bx:dots-vertical-rounded",color:"#777",width:18})}),e.jsx(z,{element:{id:s.id}}),e.jsx("h3",{children:D()}),e.jsx("span",{className:"color-gray",children:e.jsx(ue,{fieldType:T(),css:"top-2"})}),e.jsx("span",{className:"i-flex-center s-8",children:e.jsx(O,{label:e.jsx(A.Fragment,{children:e.jsx(Ke,{control:m,defaultValue:typeof x=="boolean"?x:s.isRequired,errors:n,icon:"foundation:asterisk",id:h("isRequired")})}),tip:t("Field required"),icon:!1})})]}),e.jsx(K,{field:s,index:c})]})}),e.jsx("div",{className:"bg-white with-border b-rounded p-24",children:e.jsxs("div",{className:"flex-column s-24",children:[e.jsxs("div",{className:"container align-end",children:[e.jsxs("div",{className:"col-6",children:[e.jsx(M,{isRequired:!0,id:h("name"),label:t("Name")}),e.jsx(q,{id:h("name"),register:a,errors:n,placeholder:t("Name"),defaultValue:s.name,onClick:N=>{s.name&&N.target.value==="field"&&v(h("name"),null)},validate:{required:t("This field is mandatory"),maxLength:{value:255,message:"max length is 255"}}})]}),e.jsxs("div",{className:"col-6",children:[e.jsx(M,{isRequired:!0,id:h("type"),label:t("Field type")}),e.jsx(ce,{register:a,errors:n,id:h("type"),values:xe})]})]}),e.jsxs("div",{className:"container align-end",children:[e.jsxs("div",{className:"col-6",children:[e.jsx(M,{isRequired:!1,id:h("defaultValue"),label:t("Default value")}),e.jsx(q,{id:h("defaultValue"),register:a,errors:n,placeholder:t("Default value"),defaultValue:s.defaultValue,validate:{maxLength:{value:255,message:"max length is 255"}}})]}),e.jsxs("div",{className:"col-6",children:[e.jsx(M,{isRequired:!1,id:h("description"),label:t("A brief description")}),e.jsx(q,{id:h("description"),register:a,errors:n,placeholder:t("A brief description"),defaultValue:s.description,validate:{maxLength:{value:255,message:"max length is 255"}}})]})]}),w(T())&&e.jsx(ve,{fieldId:s.id,fieldIndex:c,options:s.options?s.options:[]})]})})]})})};Ne.propTypes={index:b.number.isRequired,field:b.object.isRequired};const ye=({field:s,index:c})=>{const{attributes:u,listeners:r,setNodeRef:i,isDragging:o,transform:f}=Y({id:s.id}),p={transform:H.Translate.toString(f)};S(),k(I=>I.productDataFieldsState);const{register:a,formState:{errors:n},control:m,setValue:v}=R(),h=I=>`fields.${c}.${I}`,l=F({control:m,name:h("name")}),d=F({control:m,name:h("type")});F({control:m,name:h("isRequired")});const x=()=>{const I=h("name"),Z=se(n,I);return Z?e.jsx("span",{className:"invalid-feedback",children:t(Z.message)}):l||s.name},D=()=>d||s.type,[T,w]=g.useState(!1),[N,j]=g.useState(!1),X=g.useRef(),Q=g.useRef();return ee([X],()=>{j(!1)}),ee([Q],()=>{w(!1)}),e.jsx(A.Fragment,{children:e.jsxs("tr",{id:s.id,ref:i,style:p,className:`bg-white b-rounded ${o?"z-100 with-drop-shadow":""}`,children:[e.jsx("td",{children:e.jsxs("span",{className:"i-flex-center s-8",children:[e.jsx("span",{className:"cursor-move handle top-2",...u,...r,children:e.jsx(E,{icon:"bx:dots-vertical-rounded",color:"#777",width:18})}),e.jsx(z,{element:{id:s.id}})]})}),e.jsx("td",{children:T?e.jsx("div",{ref:Q,style:{maxWidth:"200px"},children:e.jsx(q,{id:h("name"),register:a,errors:n,placeholder:t("Name"),defaultValue:s.name,onClick:I=>{s.name&&I.target.value==="field"&&v(h("name"),null)},validate:{required:t("This field is mandatory"),maxLength:{value:255,message:"max length is 255"}}})}):e.jsx("div",{className:"i-flex-center s-8 cursor-pointer",onClick:()=>{window.innerWidth>=960&&w(!T)},children:x()})}),e.jsx("td",{children:N?e.jsx("div",{ref:X,style:{maxWidth:"200px"},children:e.jsx(ce,{register:a,id:h("type"),errors:n,defaultValue:s.type,values:xe})}):e.jsx("div",{className:"i-flex-center s-8 cursor-pointer",onClick:()=>{window.innerWidth>=960&&j(!N)},children:e.jsx(ue,{fieldType:D(),css:"with-border b-rounded p-8"})})}),e.jsx("td",{children:e.jsx(K,{field:s,index:c})})]})})};ye.propTypes={index:b.number.isRequired,field:b.object.isRequired};const De=({field:s,index:c})=>{const{closedElements:u}=k(i=>i.productDataFieldsState);return u.filter(o=>o===s.id).length===1?e.jsx(ye,{field:s,index:c}):e.jsx(Ne,{field:s,index:c})};De.propTypes={index:b.number.isRequired,field:b.object.isRequired};const ps=()=>{const s=S(),{selectedElements:c}=k(m=>m.productDataFieldsState),{control:u,setValue:r,getValues:i}=R(),o=F({control:u,name:"fields"}),f=g.useRef(null),[p,a]=g.useState(null),n=()=>{c.map(m=>{const v=o.findIndex(l=>l.id===m.id),h=o[v];switch(p){case"duplicate":const l=ie(h);o.push(l),r("fields",o),s($({field:l}));break;case"delete":const d={...h},x=i("fields").filter(D=>D.id!==m.id);r("fields",x),s(ne({field:d}));break}}),(p==="delete"||p==="duplicate")&&s(te()),f.current.value=""};return e.jsx(A.Fragment,{children:c.length>0&&e.jsxs("div",{className:"flex-between mb-24",children:[e.jsxs("div",{children:[c.length," ",t("Selected items")]}),e.jsxs("div",{className:"i-flex-center s-8",children:[e.jsxs("select",{ref:f,className:"form-control sm",onChange:m=>{a(m.target.value!==""?m.target.value:null)},children:[e.jsx("option",{value:"",children:t("Select")}),e.jsx("option",{value:"duplicate",children:t("Duplicate")}),e.jsx("option",{value:"delete",children:t("Delete")})]}),e.jsx(C,{style:y.WHITE,size:"sm",disabled:p===null,onClick:m=>{m.preventDefault(),n()},children:t("Execute")})]})]})})},Ce=({field:s,index:c})=>{const{control:u}=R(),r=F({control:u,name:`fields.${c}.name`}),{attributes:i,listeners:o,setNodeRef:f,isDragging:p,transform:a}=useSortable({id:s.id}),n={transform:CSS.Translate.toString(a)};return e.jsxs("div",{className:"tree-el flex-between s-8",ref:f,style:n,children:[e.jsxs("div",{className:"i-flex-center s-8",children:[e.jsx("span",{className:"cursor-move top-2 handle",...i,...o,children:e.jsx(Icon,{icon:"bx:dots-vertical-rounded",color:"#777",width:18})}),e.jsx("span",{className:"text-ellipsis cursor-pointer",onClick:m=>{m.preventDefault(),U(`${s.id}`)},children:r||s.name})]}),e.jsx(He,{style:y.SECONDARY,children:"F"})]},s.id)};Ce.propTypes={field:b.object.isRequired,index:b.number.isRequired};const Se=({fields:s})=>{const u=document.globals.globals;if(s.length===0)return null;const r=S(),{control:i}=R(),{move:o}=L({control:i,name:"fields"}),f=p=>{const{active:a,over:n}=p;if(a.id===n.id)return;const m=s.findIndex(l=>l.id===a.id),v=s.findIndex(l=>l.id===n.id),h=de(s,m,v);o(m,v),r(re(h))};return e.jsxs("div",{className:"b-rounded with-shadow bg-white p-24",children:[e.jsx("h3",{className:"mb-24 flex-between s-8",children:e.jsx("span",{className:"text-ellipsis cursor-pointer",children:t("product data fields")})}),e.jsx("div",{className:`tree ${u.is_rtl===!0?"rtl":""}`,children:e.jsx(G,{onDragEnd:f,items:s,children:e.jsx(A.Fragment,{children:s.length>0&&s.map((p,a)=>e.jsx(Ce,{index:a,field:p}))})})})]})};Se.propTypes={fields:b.array.isRequired};const Re=({fields:s})=>{const c=document.globals;c.settings;const u=c.globals,[r]=oe(),i=S(),{control:o}=R(),{move:f}=L({control:o,name:"fields"}),p="wp_product_data",[a,n]=g.useState(Pe(p)),m=d=>{const{active:x,over:D}=d;if(x.id===D.id)return;const T=s.findIndex(j=>j.id===x.id),w=s.findIndex(j=>j.id===D.id),N=de(s,T,w);f(T,w),i(re(N))},v=d=>{s&&s.map(x=>{i(ae({element:x,selected:d}))})},h=()=>{const d=V();i($({field:{id:d,name:"field",type:J,isRequired:!1,description:null,defaultValue:null,options:[]}})),B(1).then(()=>{U(d)})},l=d=>{Ve(p,d),n(!a)};return e.jsxs(A.Fragment,{children:[e.jsxs("div",{className:`flex-between s-8 ${s.length===0?" mb-12":""}`,children:[e.jsxs("div",{className:"i-flex-center s-8",children:[e.jsx("h3",{children:t("product data fields")}),e.jsx("span",{className:"px-8 py-4 font-sm bg-light-gray text-normal b-rounded",children:s.length>0?s.length:0})]}),s.length>0&&e.jsxs("div",{className:"i-flex-center s-8 mb-24",children:[e.jsx("div",{className:"toggle-group",children:e.jsxs("label",{htmlFor:"toggle_navigation",className:"toggle",children:[e.jsx("input",{id:"toggle_navigation",type:"checkbox",checked:a,onChangeCapture:d=>{l(d.target.checked)}}),e.jsx("span",{className:"slider round"})]})}),e.jsx("label",{className:"cursor-pointer",htmlFor:"toggle_navigation",children:t(a?"Hide navigation":"Show navigation")})]})]}),e.jsx(ps,{}),s&&s.length>0?e.jsxs("div",{className:"container",children:[a&&e.jsx("div",{className:"col-3 flex-column s-24 hidden-xs sticky",style:{top:"130px"},children:e.jsx(Se,{fields:s})}),e.jsx("div",{className:`flex-column s-24 ${a?"col-9":"col-12"}`,children:e.jsxs("div",{className:"responsive with-shadow b-rounded",children:[e.jsxs("table",{className:`acpt-table  ${u.is_rtl?"rtl":""}`,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:"10px"},children:e.jsxs("label",{className:"checkbox",htmlFor:"select-fields",style:{marginLeft:"26px"},children:[e.jsx("input",{id:"select-fields",type:"checkbox",onChange:d=>{v(d.target.checked)}}),e.jsx("span",{})]})}),e.jsx("th",{children:t("Name")}),e.jsx("th",{children:t("Type")}),e.jsx("th",{children:t("Actions")})]})}),e.jsx("tbody",{ref:r,children:e.jsx(G,{onDragEnd:m,items:s,children:s&&s.map((d,x)=>e.jsx(De,{field:d,index:x}))})})]}),e.jsx("div",{className:"p-24 bg-white",children:e.jsx(C,{type:"button",style:y.SECONDARY,onClick:d=>{d.preventDefault(),h()},children:t("Add field")})})]})})]}):e.jsx("div",{className:"mb-24 p-24 bg-white with-shadow",children:e.jsxs("div",{className:"b-maxi b-rounded p-24 flex-column s-12 text-center",children:[e.jsx("span",{children:t('No fields already created. Create the first one now by clicking the button "Add field"!')}),e.jsx("div",{children:e.jsx(C,{type:"button",style:y.SECONDARY,onClick:d=>{d.preventDefault(),h()},children:t("Add field")})})]})})]})};Re.propTypes={fields:b.array.isRequired};const Is=({})=>{const s=S(),{loading:c}=k(l=>l.fetchProductDataFields),{fields:u}=k(l=>l.productDataFieldsState),{id:r}=Te(),[i,o]=g.useState(!1),f=Fe(),[p]=oe(),a=we({mode:"all"});g.useEffect(()=>{$e(t("Manage product data fields")),Ue("#/"),s(_e(r)).then(l=>{s(Be(l.payload)),l.payload&&l.payload.map((d,x)=>{a.setValue(`fields.${x}`,d)})}).catch(l=>{console.error(l),o(!0)})},[]);const n=()=>{const l=V();s($({field:{id:l,name:"field",type:J,isRequired:!1,description:null,defaultValue:null,options:[]}})),B(1).then(()=>{U(l)})},m=()=>!(a.formState.errors&&a.formState.errors.pages),v=l=>{s(Ye(l)).then(d=>{const x=d.payload;x.success?(f(`/product-data/product/fields/${r}`),P.success(t("WooCommerce product data fields successfully saved"))):P.error(x.error)}).catch(d=>{P.error(d)})},h=[e.jsx(C,{style:y.SECONDARY,onClick:l=>{l.preventDefault(),n()},children:t("Add field")}),e.jsx(C,{disabled:!m(),style:y.PRIMARY,children:t("Save")}),e.jsx(Xe,{})];return c?e.jsx(We,{}):i?e.jsx(ze,{}):e.jsx(Ee,{...a,children:e.jsx("form",{onSubmit:a.handleSubmit(v),children:e.jsxs(Je,{title:t("Manage option pages"),actions:h,crumbs:[{label:t("Registered Custom Post Types"),link:"/"},{label:t("WooCommerce product data"),link:"/product-data/product"},{label:t("product data fields")}],children:[e.jsx(W,{register:a.register,id:"productDataId",value:r}),e.jsx("div",{ref:p,children:e.jsx(Re,{fields:Ge(u)?[]:u})})]})})})};export{Is as default};
