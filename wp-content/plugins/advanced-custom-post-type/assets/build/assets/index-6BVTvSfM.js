import{j as s,u as l}from"./fields-Cqw4NA-S.js";import{a as d,R as x,u as b}from"./vendor-D21mNUGX.js";import{s as w,L as R}from"./Layout-DCNQQmUm.js";import{P as o,u as T,a as F,b as f,m as E,c as A,R as P,L as _}from"./index-DxCcoVgy.js";import{P as L}from"./index-CEHVWT-1.js";import{f as m,r as O}from"./forms-CXGxWK8A.js";import{M as p}from"./index-Dp8I9ahT.js";import{M as C}from"./index-Dx-NZAGb.js";import{l as g}from"./index-Dc6Ibt6o.js";import{R as D}from"./index-C8n7JnXF.js";import"./objectWithoutPropertiesLoose-D8pFLZ8M.js";const N=({browser:e})=>{const i=document.globals.globals,[a,r]=d.useState(!1);return e?s.jsxs(x.Fragment,{children:[s.jsx(p,{size:"large",title:"Browser details",visible:a,buttons:[],children:s.jsx("div",{className:"responsive",children:s.jsxs("table",{className:`acpt-table spaceless ${i.is_rtl?"rtl":""}`,children:[s.jsxs("tr",{children:[s.jsx("td",{children:s.jsx("span",{className:"text-bold color-black",children:"NAME"})}),s.jsx("td",{className:"pl-8",children:e.name})]}),s.jsxs("tr",{children:[s.jsx("td",{children:s.jsx("span",{className:"text-bold color-black",children:"PLATFORM"})}),s.jsx("td",{className:"pl-8",children:e.platform})]}),s.jsxs("tr",{children:[s.jsx("td",{children:s.jsx("span",{className:"text-bold color-black",children:"UB"})}),s.jsx("td",{className:"pl-8",children:e.ub})]}),s.jsxs("tr",{children:[s.jsx("td",{children:s.jsx("span",{className:"text-bold color-black",children:"USER AGENT"})}),s.jsx("td",{className:"pl-8",children:s.jsx("span",{className:"break-spaces",children:e.userAgent})})]}),s.jsxs("tr",{children:[s.jsx("td",{children:s.jsx("span",{className:"text-bold color-black",children:"VERSION"})}),s.jsx("td",{className:"pl-8",children:e.version})]})]})})}),s.jsx("a",{href:"#",type:"button",onClick:t=>{t.preventDefault(),r(!a)},children:e.name})]}):null};N.propTypes={browser:o.object.isRequired};const k=({data:e})=>{const i=document.globals.globals,[a,r]=d.useState(!1);return e.length===0?null:s.jsxs(x.Fragment,{children:[s.jsx(p,{size:"large",title:"Raw data",visible:a,buttons:[],children:s.jsx("div",{className:"responsive",children:s.jsxs("table",{className:`acpt-table spaceless ${i.is_rtl?"rtl":""}`,children:[s.jsxs("tr",{children:[s.jsx("td",{children:s.jsx("span",{className:"text-bold color-black",children:l("Name")})}),s.jsx("td",{children:s.jsx("span",{className:"text-bold color-black",children:l("Type")})}),s.jsx("td",{children:s.jsx("span",{className:"text-bold color-black",children:l("Value")})})]}),e.map((t,c)=>s.jsxs("tr",{children:[s.jsx("td",{className:"pl-8",children:t.name}),s.jsx("td",{className:"pl-8",children:s.jsx(C,{fieldType:t.type,css:"with-border b-rounded p-8"})}),s.jsx("td",{className:"pl-8",children:s.jsx("span",{className:"break-spaces",children:t.value})})]},c))]})})}),s.jsx("a",{href:"#",type:"button",onClick:t=>{t.preventDefault(),r(!a)},children:l("Show data")})]})};k.propTypes={data:o.array.isRequired};const y=({errors:e})=>{const i=document.globals.globals,[a,r]=d.useState(!1);return e.length===0?null:s.jsxs(x.Fragment,{children:[s.jsx(p,{size:"large",title:"Errors",visible:a,buttons:[],children:s.jsx("div",{className:"responsive",children:s.jsxs("table",{className:`acpt-table spaceless ${i.is_rtl?"rtl":""}`,children:[s.jsxs("tr",{children:[s.jsx("td",{children:s.jsx("span",{className:"text-bold color-black",children:l("Key")})}),s.jsx("td",{children:s.jsx("span",{className:"text-bold color-black",children:l("Error")})})]}),e.map((t,c)=>s.jsxs("tr",{children:[s.jsx("td",{children:t.key}),s.jsx("td",{children:t.error})]},c))]})})}),s.jsx("a",{href:"#",type:"button",onClick:t=>{t.preventDefault(),r(!a)},children:l("Show errors")})]})};y.propTypes={errors:o.array.isRequired};const v=({action:e,callback:n})=>{const[i,a]=d.useState(!1);if(!e||!n)return null;if(e===m.FILL_META)return n;let r=[];return e===m.PHP&&r.push(g.php({})),e===m.AJAX&&r.push(g.jsx({})),s.jsxs(x.Fragment,{children:[s.jsx(p,{size:"large",title:"Browser details",visible:i,buttons:[],children:s.jsx(D,{value:n,height:"250px",editable:!1,theme:"light",extensions:r})}),s.jsx("a",{href:"#",type:"button",onClick:t=>{t.preventDefault(),a(!i)},children:l("Show")})]})};v.propTypes={action:o.string.isRequired,callback:o.string.isRequired};const S=d.memo(({record:e})=>s.jsxs("tr",{children:[s.jsx("td",{children:e.createdAt}),s.jsx("td",{children:O(e.action)}),s.jsx("td",{children:s.jsx(v,{action:e.action,callback:e.callback})}),s.jsx("td",{children:e.ip}),s.jsx("td",{children:s.jsx(N,{browser:e.browser})}),s.jsx("td",{children:e.user&&e.uid&&s.jsx("a",{target:"_blank",href:`/wp-admin/user-edit.php?user_id=${e.uid}`,children:e.user})}),s.jsx("td",{children:s.jsx(k,{data:e.data})}),s.jsx("td",{children:s.jsx(y,{errors:e.errors})})]}));S.propTypes={record:o.object.isRequired};const X=()=>{const e=document.globals,n=e.settings,i=e.globals,{id:a}=b(),{page:r}=b(),t=T(),{data:c,loading:M}=F(h=>h.fetchFormSubmissions),j=n.length>0&&f(n,"key","records_per_page")!==""?f(n,"key","records_per_page").value:20,u=Math.ceil(c.count/j);return d.useEffect(()=>{w(),E(l("Forms list")),A("#/forms"),t(P({id:a,page:r||1,perPage:j}))},[r]),M?s.jsx(_,{}):s.jsx(R,{title:l("Form submissions"),crumbs:[{label:l("Forms list"),link:"/forms"},{label:l("Form submissions")}],children:c.records&&c.records.length>0?s.jsx("div",{className:"responsive with-shadow b-rounded",children:s.jsxs("table",{className:`acpt-table ${i.is_rtl?"rtl":""}`,children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:l("Date")}),s.jsx("th",{children:l("Action")}),s.jsx("th",{children:l("Callback")}),s.jsx("th",{children:"IP"}),s.jsx("th",{children:l("Browser")}),s.jsx("th",{children:l("User")}),s.jsx("th",{children:l("Data")}),s.jsx("th",{children:l("Errors")})]})}),s.jsx("tbody",{children:c.records&&c.records.map(h=>s.jsx(S,{record:h},h.id))}),u>1&&s.jsx("tfoot",{children:s.jsx("tr",{children:s.jsx("td",{colSpan:8,children:s.jsx(L,{currentPage:r?parseInt(r):1,totalPages:u,baseLink:`/form-submissions/${a}`})})})})]})}):s.jsx("div",{className:"p-24 bg-white with-shadow",children:s.jsx("div",{className:"b-maxi b-rounded p-24 flex-column s-12 text-center",children:s.jsx("span",{children:l("No records found.")})})})})};export{X as default};
