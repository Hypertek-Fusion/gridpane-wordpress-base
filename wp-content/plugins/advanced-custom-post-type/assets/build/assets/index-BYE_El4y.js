import{j as e,u as s,c as f}from"./fields-Cqw4NA-S.js";import{a as d,R as m}from"./vendor-D21mNUGX.js";import{n as p,L as C,V as D}from"./Layout-DCNQQmUm.js";import{P as v,B as x,s as h,G as M,F as _,u as E,a as N,m as R,c as S,af as k,L as T}from"./index-DxCcoVgy.js";import{M as g}from"./index-Dp8I9ahT.js";import{C as w,a as u}from"./CardRow-BUjSt7Qo.js";const b=({license:t})=>{const[i,n]=d.useState(!1),[l,r]=d.useState(!1),[o,c]=d.useState(!1),j=()=>{c(!0),r(!0),M("deactivateLicenseAction",{}).then(a=>{if(r(!1),a.success===!0&&a.message){const L=a.message;p.success(s(L+" The browser will refresh after 5 seconds.")),_(5e3)}else p.error(s("An unexpected error has occurred"))}).catch(a=>{r(!1),c(!1),p.error(a)})},y=[e.jsx(x,{disabled:o,style:h.SUCCESS,onClick:a=>{a.preventDefault(),j(),n(!i)},children:s("Yes")}),e.jsx(x,{style:h.DANGER,onClick:a=>{a.preventDefault(),n(!i)},children:s("No")})];return e.jsxs(m.Fragment,{children:[e.jsx(g,{textAlign:"left",title:s("Confirm deactivating license"),visible:i,buttons:y,children:e.jsxs("div",{className:"flex-column s-8",children:[e.jsxs("div",{children:[s("Confirm deactivating license")," ",t&&t.code?t.code:null,"."]}),e.jsx("div",{children:s("Are you sure?")})]})}),e.jsx(x,{disabled:l,onClick:a=>{a.preventDefault(),n(!i)},style:h.DANGER,children:s(`${l?"Please wait":"Deactivate"}`)})]})};b.propTypes={license:v.object};const A=({license:t})=>{const n=document.globals.globals,[l,r]=d.useState(!1),o=[e.jsx(x,{style:h.DANGER,onClick:c=>{c.preventDefault(),r(!l)},children:s("Close")})];return t.licenseActivation?e.jsxs(m.Fragment,{children:[e.jsx(g,{textAlign:"left",title:f(s("details")),visible:l,buttons:o,children:e.jsx("div",{className:"responsive",children:e.jsx("table",{className:`acpt-table spaceless ${n.is_rtl?"rtl":""}`,children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:"activation_id"}),e.jsx("td",{children:t.licenseActivation&&t.licenseActivation.activation_id})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"site_name"}),e.jsx("td",{children:t.licenseActivation&&t.licenseActivation.site_name})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"site_url"}),e.jsx("td",{children:t.licenseActivation&&t.licenseActivation.site_url})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"user_id"}),e.jsx("td",{children:t.licenseActivation&&t.licenseActivation.user_id})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"ip"}),e.jsx("td",{children:t.licenseActivation&&t.licenseActivation.ip})]})]})})})}),e.jsx("a",{href:"#",onClick:c=>{c.preventDefault(),r(!l)},children:s("Show")})]}):null};A.propTypes={license:v.object.isRequired};const G=()=>{const t=E(),{license:i,error:n,loading:l}=N(j=>j.fetchLicense);d.useEffect(()=>{R(s("Manage your license")),S("#/license"),t(k())},[]);const r=()=>n||(i.code?i.code:""),o=()=>n||(i.expiring_date?i.expiring_date:s("Lifetime"));let c=[e.jsx(b,{license:i})];return l?e.jsx(T,{}):e.jsx(C,{title:s("Manage your license"),actions:c,crumbs:[{label:s("My license")}],children:e.jsxs(w,{title:s("Manage your registered license key"),children:[e.jsx(u,{label:s("Plugin version"),value:e.jsx("div",{className:"i-flex-center s-8",children:e.jsx(D,{})})}),e.jsx(u,{label:s("License"),value:e.jsx("code",{className:"m-0 p-0","data-cy":"license-code",children:r()})}),e.jsx(u,{label:s("Expiration date"),value:o()}),e.jsx(u,{label:f(s("details")),value:e.jsx(A,{license:i})})]})})};G.propTypes={};export{G as default};
