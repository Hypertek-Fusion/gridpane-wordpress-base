import{j as e,u as i}from"./fields-Cqw4NA-S.js";import{R as f,a as N}from"./vendor-D21mNUGX.js";import{P as a,A as F,s as u,i as x,u as L,B as b,G as y,ca as g,a as M,m as I,c as W,L as $,I as v}from"./index-DxCcoVgy.js";import{n as T,L as k}from"./Layout-DCNQQmUm.js";import{T as E,a as R}from"./index-WYQ2JGQs.js";import{C as D}from"./index-DUqbm7sl.js";import{u as O,c as V,F as G}from"./index.esm-CunHohLK.js";import{S}from"./Select-DQFFBRh5.js";import{I as C}from"./InputHidden-D-OSbUvk.js";import{M as B}from"./index-Dx-NZAGb.js";const q=({fileExists:t,xml:s,helpLink:l})=>e.jsx("div",{className:"responsive",children:e.jsxs("div",{className:"flex-column s-24",children:[e.jsx(F,{style:t?u.SUCCESS:u.WARNING,children:i(t?"The file wpml-config.xml was successfully generated.":"The file wpml-config.xml was not successfully generated.")}),!t&&e.jsxs("div",{children:["Create a file called ",e.jsx("code",{children:"wpml-config.xml"})," inside the root of advanced-custom-post-type folder. ",e.jsx("a",{href:l,target:"_blank",children:"More info here"}),"."]}),s&&e.jsxs(f.Fragment,{children:[e.jsx("div",{children:i("This is the generated wpml-config.xml file:")}),e.jsx(D,{code:s,height:400,editable:!1})]})]})});q.propTypes={fileExists:a.bool.isRequired,xml:a.string.isRequired,helpLink:a.string.isRequired};const w=({name:t,field:s})=>{const{register:l,errors:n}=O(),r=[{label:"Copy",value:"copy"},{label:"Copy once",value:"copy-once"},{label:"Translate",value:"translate"},{label:"Ignore",value:"ignore"}],c=[{label:"Textarea",value:"textarea"},{label:"Line",value:"line"},{label:"Visual",value:"visual"}];return e.jsxs("tr",{children:[e.jsx(C,{register:l,id:`${t}.${s.slug}.id`,value:s.id}),e.jsx(C,{register:l,id:`${t}.${s.slug}.label`,value:s.label}),e.jsx("td",{children:s.slug}),e.jsx("td",{children:s.label}),e.jsx("td",{children:e.jsx(B,{fieldType:s.type,css:"with-border b-rounded p-8"})}),e.jsx("td",{children:e.jsx(S,{register:l,id:`${t}.${s.slug}.action`,errors:n,values:r,defaultValue:s.action})}),e.jsx("td",{children:e.jsx(S,{register:l,id:`${t}.${s.slug}.style`,errors:n,values:c,defaultValue:s.style})})]})};w.propTypes={name:a.string.isRequired,field:a.array.isRequired};const p=({name:t,title:s,fields:l})=>{if(x(l))return null;let n=[];for(const[r,c]of Object.entries(l))n.push(c);return e.jsxs("div",{children:[e.jsx("h3",{className:"mb-12",children:i(s)}),e.jsx("div",{className:"responsive with-shadow b-rounded",children:e.jsxs("table",{className:"acpt-table",children:[e.jsxs("thead",{children:[e.jsx("th",{children:i("Field slug")}),e.jsx("th",{children:i("Field name")}),e.jsx("th",{children:i("Type")}),e.jsx("th",{children:i("Action")}),e.jsx("th",{children:i("Style")})]}),e.jsx("tbody",{children:n&&n.map((r,c)=>e.jsx(w,{name:t,field:r}))})]})})]})};p.propTypes={name:a.string.isRequired,title:a.string.isRequired,fields:a.array.isRequired};const A=({fields:t})=>{const s=L(),l=t["admin-texts"],n=t["custom-fields"],r=t["custom-term-fields"],[c,o]=N.useState(!1),h=V({mode:"onChange"}),j=()=>{o(!0),y("saveWPMLConfigAction",{resetDefault:!0}).then(d=>{d.success===!0&&s(g()).then(m=>{T.success(i("Settings successfully saved"))}),o(!1)}).catch(d=>{console.error(d.message),o(!1)})},P=d=>{o(!0),y("saveWPMLConfigAction",d).then(m=>{m.success===!0&&s(g()).then(H=>{T.success(i("Settings successfully saved"))}),o(!1)}).catch(m=>{console.error(m.message),o(!1)})};return x(l)&&x(n)&&x(r)?e.jsx(F,{style:u.WARNING,children:i("No fields found")}):e.jsx(G,{...h,children:e.jsx("form",{onSubmit:h.handleSubmit(P),children:e.jsxs("div",{className:"flex-column s-24",children:[e.jsx("div",{children:i("Override here the default settings:")}),e.jsx(p,{name:"custom-fields",title:"Post type fields",fields:n}),e.jsx(p,{name:"custom-term-fields",title:"Taxonomy fields",fields:r}),e.jsx(p,{name:"admin-texts",title:"Option page fields",fields:l}),e.jsxs("div",{className:"i-flex-center s-8",children:[e.jsx(b,{disabled:c,type:"submit",style:u.PRIMARY,children:i("Save")}),e.jsx(b,{disabled:c,type:"button",style:u.SECONDARY,onClick:d=>{d.preventDefault(),j()},children:i("Reset to the default values")})]})]})})})};A.propTypes={fields:a.array.isRequired};const Y=({title:t,url:s,helpLink:l})=>{const n=L(),{fileExists:r,xml:c,fields:o,loading:h}=M(j=>j.fetchWPMLSettings);return N.useEffect(()=>{I(t),W(s),n(g())},[]),h?e.jsx($,{}):e.jsx(k,{title:t,crumbs:[{label:t}],children:e.jsx("div",{className:"acpt-main",children:e.jsxs(E,{children:[e.jsx(R,{title:e.jsxs(f.Fragment,{children:[e.jsx("span",{className:"visible-xs",children:e.jsx(v,{icon:"bx:cog",width:24})}),e.jsx("span",{className:"hidden-xs",children:i("Actual settings")})]}),children:e.jsx(q,{helpLink:l,fileExists:r,xml:c})}),e.jsx(R,{title:e.jsxs(f.Fragment,{children:[e.jsx("span",{className:"visible-xs",children:e.jsx(v,{icon:"bx:cog",width:24})}),e.jsx("span",{className:"hidden-xs",children:i("Custom settings")})]}),children:e.jsx(A,{fields:o})})]})})})};Y.propTypes={title:a.string.isRequired,link:a.string.isRequired,helpLink:a.string.isRequired};export{Y as W};
