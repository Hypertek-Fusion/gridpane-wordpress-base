import{j as e,r as z,f as n,u as o,a as me,s as fe,l as W}from"./fields-Cqw4NA-S.js";import{a as S,R as D,u as be}from"./vendor-D21mNUGX.js";import{n as H,u as ge,s as je,L as ve}from"./Layout-DCNQQmUm.js";import{b as X,C as Z,c as O,d as ye,D as Ne,e as Ce,f as ke,g as Re,h as Se,M as $e,a as Ee}from"./sortable.esm-C-GypyhB.js";import{P as m,a as V,G as J,I as k,A as G,s as $,u as E,S as Ve,T as U,U as Te,V as we,W as De,X as F,Y as Oe,Z as Ae,$ as T,a0 as M,a1 as Ie,a2 as B,B as _,a3 as Q,a4 as N,b as P,a5 as Y,m as Pe,a6 as _e,a7 as L,a8 as Fe,L as Me,a9 as Le,aa as qe}from"./index-DxCcoVgy.js";import{T as Ke,a as q}from"./index-WYQ2JGQs.js";import{u as ee}from"./index-DRV1MUeg.js";import{C as He}from"./index-DJ-BFKuq.js";import{d as Ge,w as Ue}from"./bundle.esm.min-B-HQpnrw.js";import{c as We}from"./index.esm-CunHohLK.js";import{M as Be}from"./index-Dx-NZAGb.js";import{T as Ye}from"./index-XHH1WL2a.js";import{M as ze}from"./index-Dp8I9ahT.js";import{m as K}from"./metaTypes-Bb9tjSPe.js";import{S as Xe}from"./SaveFormModal-BrNCwxms.js";import"./index-Cwt3Qm9G.js";import"./InputHidden-D-OSbUvk.js";import"./Label-DD1DoJkn.js";import"./Input-CuPRbCrx.js";import"./validation-D-MLcBjP.js";import"./Select-DQFFBRh5.js";import"./forms-CXGxWK8A.js";import"./index-C8n7JnXF.js";import"./objectWithoutPropertiesLoose-D8pFLZ8M.js";import"./index-Dc6Ibt6o.js";import"./posts-DE4oWSSH.js";const A=({element:a,isDragging:d})=>{const l=a.field,r=a.settings,{previewElement:c}=V(u=>u.formManager),[s,h]=S.useState(l.extra.defaultValue);S.useEffect(()=>{J("fetchFormPreviewElementAction",{field:l,previewElement:c}).then(u=>{h(u.value!==null?u.value:l.extra.defaultValue)}).catch(u=>{console.error(u.message)})},[c]),S.useEffect(()=>{c||h(l.extra.defaultValue)},[l.extra.defaultValue]);const x=d?{zIndex:1e4,padding:"8px",background:"white",borderRadius:"4px",opacity:"0.8",boxShadow:"rgba(0, 0, 0, 0.16) 0px 1px 4px"}:{},t=()=>{const u=l.extra.options?l.extra.options:[],p=a.id+"-"+z(8);switch(l.type){case n.BUTTON:return e.jsx("button",{disabled:l.extra.disabled?l.extra.disabled:!1,id:a.id,type:l.extra.type,className:`acpt-btn acpt-btn-default acpt-btn-primary ${r.css}`,children:l.extra.label},p);case n.CAPTCHA:return e.jsxs("div",{className:"i-flex-center p-8 s-8 bg-pale-gray with-border b-rounded",children:[e.jsx(k,{icon:"logos:recaptcha",width:32}),e.jsx("span",{children:"CAPTCHA"})]});case n.CHECKBOX:return e.jsx("div",{className:"i-flex-center s-8",children:u&&u.map(y=>e.jsxs("div",{className:"i-flex-center s-4",children:[e.jsx("input",{disabled:l.extra.disabled?l.extra.disabled:!1,type:"checkbox",checked:y.value===s,value:y.value,id:y.id},p),e.jsx("label",{htmlFor:y.id,children:y.label})]}))});case n.COLOR:return e.jsx("input",{type:"color",disabled:l.extra.disabled?l.extra.disabled:!1,className:`form-control ${r.css}`,id:a.id,readOnly:!0,defaultValue:s},p);case n.TIME:return e.jsx("input",{type:"time",disabled:l.extra.disabled?l.extra.disabled:!1,className:`form-control ${r.css}`,id:a.id,readOnly:!0,placeholder:l.extra.placeholder,defaultValue:s},p);case n.WORDPRESS_POST_DATE:case n.DATE:case n.DATE_TIME:return e.jsx("input",{type:"date",disabled:l.extra.disabled?l.extra.disabled:!1,className:`form-control ${r.css}`,id:a.id,readOnly:!0,placeholder:l.extra.placeholder,defaultValue:s},p);case n.WORDPRESS_USER_EMAIL:case n.EMAIL:return e.jsx("input",{type:"email",disabled:l.extra.disabled?l.extra.disabled:!1,className:`form-control ${r.css}`,id:a.id,readOnly:!0,placeholder:l.extra.placeholder,defaultValue:s},p);case n.WORDPRESS_POST_THUMBNAIL:case n.FILE:return e.jsx("input",{type:"file",disabled:l.extra.disabled?l.extra.disabled:!1,className:`form-control ${r.css}`,id:a.id,readOnly:!0,placeholder:l.extra.placeholder,defaultValue:s},p);case n.HIDDEN:return e.jsxs(G,{style:$.DEFAULT,children:["HIDDEN ",s?`[${s}]`:""]});case n.ICON:return e.jsx(k,{icon:"bx:wink-smile",width:24});case n.NUMBER:return e.jsx("input",{disabled:l.extra.disabled?l.extra.disabled:!1,type:"number",className:`form-control ${r.css}`,id:a.id,readOnly:!0,min:l.extra.min,max:l.extra.max,step:l.extra.step,placeholder:l.extra.placeholder,defaultValue:s},p);case n.RADIO:return e.jsx("div",{className:"i-flex-center s-8",children:u&&u.map(y=>e.jsxs("div",{className:"i-flex-center s-4",children:[e.jsx("input",{disabled:l.extra.disabled?l.extra.disabled:!1,type:"radio",checked:y.value===s,value:y.value,id:y.id},p),e.jsx("label",{htmlFor:y.id,children:y.label})]}))});case n.RANGE:return e.jsx("input",{type:"range",className:`form-control ${r.css}`,id:a.id,readOnly:!0,min:l.extra.min,max:l.extra.max,step:l.extra.step,defaultValue:s,disabled:!0},p);case n.RATING:let g=isNaN(parseInt(s))?0:parseInt(s);g<0&&(g=0),g>5&&(g=5);const f=5-g;return e.jsxs("div",{className:"i-flex-center",children:[[...Array(s)].map((y,C)=>e.jsx(k,{icon:"bxs:star",width:24})),[...Array(f)].map((y,C)=>e.jsx(k,{icon:"bx:star",width:24}))]});case n.TURNSTILE:return e.jsxs("div",{className:"i-flex-center p-8 s-8 bg-pale-gray with-border b-rounded",children:[e.jsx(k,{icon:"devicon:cloudflare",width:32}),e.jsx("span",{children:"TURNSTILE"})]});case n.WORDPRESS_POST_TAXONOMIES:let b=[];for(const[y,C]of Object.entries(u)){let w=[];for(const[pe,xe]of Object.entries(C))w.push({label:xe,value:pe});b.push({label:y,options:w})}return e.jsx("select",{className:`form-control ${r.css}`,id:a.id,disabled:!0,multiple:l.extra.isMulti,placeholder:l.extra.placeholder,defaultValue:s,children:b&&b.map(y=>e.jsx("optgroup",{label:y.label,children:y.options&&y.options.map(C=>e.jsx("option",{value:C.value,children:C.label}))}))},p);case n.WORDPRESS_POST_AUTHOR:case n.SELECT:return e.jsx("select",{className:`form-control ${r.css}`,id:a.id,disabled:!0,multiple:l.extra.isMulti,placeholder:l.extra.placeholder,defaultValue:s,children:u&&u.map(y=>e.jsx("option",{value:y.value,children:y.label}))},p);case n.WORDPRESS_TERM_DESCRIPTION:case n.WORDPRESS_USER_BIO:case n.WORDPRESS_POST_CONTENT:case n.WORDPRESS_POST_EXCERPT:case n.TEXTAREA:return e.jsx("textarea",{disabled:l.extra.disabled?l.extra.disabled:!1,className:`form-control ${r.css}`,id:a.id,rows:l.extra.rows,cols:l.extra.cols,readOnly:!0,placeholder:l.extra.placeholder,defaultValue:s},p);case n.TOGGLE:return e.jsx("div",{className:"toggle-group",children:e.jsxs("label",{className:"toggle",children:[e.jsx("input",{disabled:l.extra.disabled?l.extra.disabled:!1,readOnly:!0,type:"checkbox",checked:l.extra.checked}),e.jsx("span",{className:"slider round"})]})});case n.URL:const i=()=>typeof s=="object"&&s.urlLabel?s.urlLabel:typeof l.extra.defaultValue=="object"&&l.extra.defaultValue.urlLabel?l.extra.defaultValue.urlLabel:null,R=()=>typeof s=="object"&&s.url?s.url:typeof l.extra.defaultValue=="object"?l.extra.defaultValue.url?l.extra.defaultValue.url:null:s;return l.extra.hideLabel?e.jsx("input",{disabled:l.extra.disabled?l.extra.disabled:!1,type:"url",className:`form-control ${r.css}`,id:a.id,readOnly:!0,placeholder:l.extra.placeholder,defaultValue:R()},p):e.jsxs("div",{className:"i-flex-center s-8 w-100",children:[e.jsx("input",{disabled:l.extra.disabled?l.extra.disabled:!1,type:"url",className:`form-control ${r.css}`,id:a.id,readOnly:!0,placeholder:l.extra.placeholder,defaultValue:R()},p),e.jsx("input",{disabled:l.extra.disabled?l.extra.disabled:!1,type:"text",className:`form-control ${r.css}`,id:`${a.id}_label`,readOnly:!0,placeholder:l.extra.labelPlaceholder,defaultValue:i()},`${p}_label`)]});case n.CURRENCY:case n.LENGTH:case n.WEIGHT:const v=()=>s!==null&&l.type===n.CURRENCY&&typeof s=="object"&&s.currency?s.currency:s!==null&&l.type===n.LENGTH&&typeof s=="object"&&s.length?s.length:s!==null&&l.type===n.WEIGHT&&typeof s=="object"&&s.weight?s.weight:l.extra.defaultValue!==null&&l.type===n.CURRENCY&&typeof l.extra.defaultValue=="object"?l.extra.defaultValue.currency?l.extra.defaultValue.currency:null:l.extra.defaultValue!==null&&l.type===n.LENGTH&&typeof l.extra.defaultValue=="object"?l.extra.defaultValue.length?l.extra.defaultValue.length:null:l.extra.defaultValue!==null&&l.type===n.WEIGHT&&typeof l.extra.defaultValue=="object"?l.extra.defaultValue.weight?l.extra.defaultValue.weight:null:l.extra.uom?l.extra.uom:null,j=()=>s!==null&&l.type===n.CURRENCY&&typeof s=="object"&&s.currencyValue?s.currencyValue:s!==null&&l.type===n.LENGTH&&typeof s=="object"&&s.lengthValue?s.lengthValue:s!==null&&l.type===n.WEIGHT&&typeof s=="object"&&s.weightValue?s.weightValue:l.extra.defaultValue!==null&&l.type===n.CURRENCY&&typeof l.extra.defaultValue=="object"?l.extra.defaultValue.currencyValue?l.extra.defaultValue.currencyValue:null:l.extra.defaultValue!==null&&l.type===n.LENGTH&&typeof l.extra.defaultValue=="object"?l.extra.defaultValue.lengthValue?l.extra.defaultValue.lengthValue:null:l.extra.defaultValue!==null&&l.type===n.WEIGHT&&typeof l.extra.defaultValue=="object"?l.extra.defaultValue.weightValue?l.extra.defaultValue.weightValue:null:s;return e.jsxs("div",{className:"i-flex-center s-8 w-100",children:[e.jsx("input",{type:"text",className:`w-100 form-control ${r.css}`,id:a.id,readOnly:!0,defaultValue:j(),disabled:!0},p),e.jsx("span",{children:v()})]});case n.PASSWORD:case n.WORDPRESS_USER_PASSWORD:return e.jsx("input",{type:"password",className:`form-control ${r.css}`,id:a.id,readOnly:!0,defaultValue:s,disabled:!0},p)}return e.jsx("input",{disabled:l.extra.disabled?l.extra.disabled:!1,type:"text",className:`form-control ${r.css}`,id:a.id,readOnly:!0,placeholder:l.extra.placeholder,defaultValue:typeof s=="string"?s:null},p)};return d?e.jsx("span",{style:x,children:l.name}):e.jsx("div",{className:`text-${r.alignment}`,style:x,children:e.jsxs("div",{className:r.layout==="inline"?"i-flex-center s-8 w-100":"",children:[l.label!==""&&l.label!==null&&e.jsxs("label",{htmlFor:a.id,className:"form-label",style:r.layout==="inline"?{margin:"0"}:null,children:[l.label,a.field.isRequired&&e.jsx("span",{className:"color-danger",children:"*"})]}),e.jsxs("div",{className:"w-100",children:[t(),l.description!==""&&l.description!==null&&e.jsx("div",{className:"form-description color-light-gray",children:l.description})]})]})})};A.propTypes={element:m.object.isRequired,isDragging:m.bool};const ae=({element:a})=>{const d=E(),{activeElement:l}=V(C=>C.formManager),r=a.settings,{setNodeRef:c,isDragging:s,transform:h,listeners:x,attributes:t}=X({id:a.id,data:{fromCanvas:!0}}),u={transform:Z.Translate.toString(h)},p=O({id:a.id+"-top",data:{element:a,isTopHalfElement:!0}}),g=O({id:a.id+"-bottom",data:{element:a,isBottomHalfElement:!0}}),f=O({id:a.id+"-left",data:{element:a,isLeftHalfElement:!0}}),b=O({id:a.id+"-right",data:{element:a,isRightHalfElement:!0}}),i=()=>l?l.id===a.id:!1,R=()=>{d(Ve({id:a.id}))},v=()=>{d(U())},j=()=>{d(Te({id:a.id}))},y=()=>{d(we({id:a.id}))};return s?e.jsx("div",{className:`canvas-element col-${r.cols}`,"data-cy":`canvas-element-${a.id}`,children:e.jsx("div",{className:"inside",children:e.jsx("div",{className:"element",children:e.jsx(A,{element:a})})})}):e.jsxs("div",{ref:c,id:a.id,style:u,"data-cy":`canvas-element-${a.id}`,className:`canvas-element col-${r.cols} ${i()?"active":""}`,children:[p.isOver&&e.jsx("div",{className:"top-half-hover-placeholder"}),g.isOver&&e.jsx("div",{className:"bottom-half-hover-placeholder"}),f.isOver&&e.jsx("div",{className:"left-half-hover-placeholder"}),b.isOver&&e.jsx("div",{className:"right-half-hover-placeholder"}),e.jsx("div",{ref:p.setNodeRef,className:"top-half"}),e.jsx("div",{ref:g.setNodeRef,className:"bottom-half"}),e.jsx("div",{ref:f.setNodeRef,className:"left-half"}),e.jsx("div",{ref:b.setNodeRef,className:"right-half"}),e.jsxs("div",{className:`inside ${i()?"active":""}`,children:[i()&&e.jsxs("div",{className:"actions flex s-8",children:[e.jsx("small",{children:a.field.name}),e.jsx("span",{className:"cursor-move handle",...t,...x,children:e.jsx(k,{icon:"bx:move",width:14})}),e.jsx("a",{href:"#",onClick:C=>{C.preventDefault(),C.stopPropagation(),v()},children:e.jsx(k,{icon:"bx:x",width:14})}),e.jsx("a",{href:"#",onClick:C=>{C.preventDefault(),C.stopPropagation(),j()},children:e.jsx(k,{icon:"bx:copy",width:14})}),e.jsx("a",{href:"#",onClick:C=>{C.preventDefault(),C.stopPropagation(),y()},children:e.jsx(k,{icon:"bx-trash",width:14,color:"#ffffff"})})]}),e.jsx("div",{onClick:C=>{C.preventDefault(),C.stopPropagation(),R()},className:"element",children:e.jsx(A,{element:a})})]})]})};ae.propTypes={element:m.shape({field:m.object.isRequired,overlayItem:m.element.isRequired,previewItem:m.element.isRequired}).isRequired};const Ze=()=>{const{elements:a}=V(t=>t.formManager),{listeners:d,setNodeRef:l,transform:r,transition:c,isOver:s}=O({id:"canvas-drop-area",data:{isCanvas:!0}}),h={transform:Z.Translate.toString(r),transition:c},x=e.jsx("div",{className:"flex-absolute-center",children:e.jsx("h4",{children:o("Drop elements here")})});return e.jsxs("div",{"data-cy":"form-canvas",ref:l,className:`col-9 canvas with-shadow bg-white b-rounded p-24 ${s?"canvas-hover":""}`,style:h,...d,children:[!s&&a.length===0&&x,e.jsx("div",{className:"canvas-container","data-cy":"form-canvas-container",children:a.map((t,u)=>e.jsx(ae,{element:t},u))})]})},I=({field:a,hidden:d=!1,isDragging:l=!1,mode:r,isActive:c=!0})=>{const s=()=>a.group==="WordPress post fields"?$.INFO:a.group==="WordPress taxonomy fields"?$.WARNING:a.group==="WordPress user fields"?$.DANGER:a.group==="ACPT fields"?$.SECONDARY:$.DEFAULT,h=()=>{const{icon:x}=me(a.type);return x};return r==="overlay"||r==="dragging"?e.jsx("div",{className:`acpt-badge acpt-badge-${s()} m-0 cursor-move with-shadow`,style:{width:"150px"},children:e.jsxs("span",{className:"flex-between",children:[e.jsx("span",{className:"text-ellipsis",children:a.name}),e.jsx(k,{icon:h(),width:18})]})}):e.jsx("div",{className:`acpt-badge acpt-badge-${s()} m-0 ${d?"hidden":"block"} ${c?"cursor-move":"disabled"} ${l?"with-border":""}`,children:e.jsxs("div",{className:"flex-between",children:[e.jsx("span",{className:"text-ellipsis",children:a.name}),e.jsx(k,{icon:h(),width:18})]})})};I.propTypes={hidden:m.bool,isDragging:m.bool,mode:m.oneOf(["overlay","dragging"]),isActive:m.bool,field:m.shape({id:m.string.isRequired,name:m.string.isRequired,group:m.string.isRequired,type:m.string.isRequired}).isRequired};const le=({field:a,hidden:d})=>{const{elements:l}=V(u=>u.formManager),r={css:"",cols:"12",layout:"block",alignment:"left"},{attributes:c,listeners:s,setNodeRef:h,isDragging:x}=X({id:a.id,data:{field:a,previewItem:e.jsx(A,{element:{field:a}}),settings:r,validationRules:[],fromSidebar:!0}});return(a.isReusable===!0?!0:l.findIndex(u=>u.field.name===a.name)===-1)?e.jsx("div",{"data-cy":`field-panel-element-${a.name}`,className:d?"hidden":"",ref:h,...s,...c,children:e.jsx(I,{field:a,hidden:d,isDragging:x,isActive:!0})}):e.jsx("div",{className:d?"hidden":"",children:e.jsx(I,{field:a,hidden:d,isDragging:x,isActive:!1})})};le.propTypes={hidden:m.bool,field:m.shape({id:m.string.isRequired,name:m.string.isRequired,group:m.string.isRequired,type:m.string.isRequired,extra:m.array.isRequired}).isRequired};const se=({name:a,fields:d,search:l})=>(()=>{if(!l)return!1;let c=0;return d.map(s=>{l&&W(s.name,l)&&c++}),c===0})()?null:e.jsxs("div",{children:[e.jsx("h4",{className:"mb-12",children:o(a)}),e.jsx("div",{className:"grid grid-2 s-12","data-cy":`field-panel-group-${fe(a)}`,children:d.map(c=>e.jsx(le,{field:c,hidden:l?!W(c.name,l):!1},c.id))})]});se.propTypes={name:m.string.isRequired,fields:m.array.isRequired,search:m.string};const te=({fields:a})=>{const[d,l]=S.useState(null),r=()=>{let s=[],h=[];return a.map(x=>{s[x.group]||(s[x.group]=[]),s[x.group].push(x)}),Object.keys(s).map(x=>{h.push({name:x,fields:s[x]})}),h},c=s=>{l(s)};return e.jsxs("div",{className:"flex-column s-24 p-24",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"mb-12",children:o("Form fields")}),e.jsx("input",{type:"text","data-cy":"form-fields-search",className:"form-control",placeholder:o("Search"),onChangeCapture:s=>c(s.target.value)})]}),r().map((s,h)=>e.jsx(se,{name:s.name,fields:s.fields,search:d},h))]})};te.propTypes={fields:m.array.isRequired};const re=({elementId:a,isTextual:d,isMedia:l,index:r,rule:c})=>{const s=E(),[h,x]=S.useState(c.condition!=="blank"&&c.condition!=="not_blank"),t=v=>`rules-${a}-${r}-${v}`,u=[{value:"blank",label:"blank"},{value:"not_blank",label:"not blank"},{value:"=",label:"="},{value:"!=",label:"!="},{value:">",label:">"},{value:">=",label:">="},{value:"<",label:"<"},{value:"<=",label:"<="},{value:"max",label:"max"},{value:"min",label:"min"},{value:"regex",label:"regex"}],p=[{value:"max_size",label:"max size"},{value:"min_size",label:"min size"}],g=()=>l?p:u,f=v=>{let j;switch(v){case"blank":j="Value is not blank";break;case"not_blank":j="Value is blank";break;case"=":j="Value is not equal to {{v}}";break;case"!=":j="Value is equal to {{v}}";break;case">":j="Value is lower or equals than {{v}}";break;case">=":j="Value is lower than {{v}}";break;case"<":j="Value is greatest or equals than {{v}}";break;case"<=":j="Value is greatest than {{v}}";break;case"max":j="The maximum length is {{v}}";break;case"min":j="The minimum length is {{v}}";break;case"max_size":j="The maximum size is {{v}}";break;case"min_size":j="The minimum size is {{v}}";break;case"regex":j="Regex value is not matching {{v}}";break}return o(j)},b=v=>{const j={...c};j.condition=v,j.message=f(v),v==="blank"||v==="not_blank"?(j.value=null,x(!1)):x(!0),s(F({elementId:a,ruleIndex:r,rule:j}))},i=v=>{const j={...c};j.value=v,s(F({elementId:a,ruleIndex:r,rule:j}))},R=v=>{const j={...c};j.message=v,s(F({elementId:a,ruleIndex:r,rule:j}))};return!d&&!l?null:e.jsxs("fieldset",{className:"acpt-fieldset",children:[e.jsxs("legend",{children:["Rule #",r+1]}),e.jsx("div",{className:"flex s-8",children:e.jsxs("div",{className:"flex-column s-8",children:[e.jsxs("div",{className:"i-flex-center s-8",children:[e.jsx("div",{className:"w-60",children:e.jsx("select",{className:"form-control",id:t("condition"),defaultValue:c.condition,onChangeCapture:v=>b(v.target.value),children:g().map((v,j)=>e.jsx("option",{value:v.value,children:v.label},j))},t("condition"))}),e.jsx("div",{className:"w-40",children:h?e.jsx("input",{type:"text",id:t("value"),className:"form-control",defaultValue:c.value,onChangeCapture:v=>i(v.target.value)},t("value")):e.jsx("input",{type:"text",readOnly:!0,disabled:!0,placeholder:null,defaultValue:null,id:t("value"),className:"form-control",value:null},t("value"))})]}),e.jsx("input",{type:"text",id:t("message"),className:"form-control",value:c.message,onChangeCapture:v=>R(v.target.value)},t("message")),e.jsx("a",{className:`color-${$.DANGER}`,href:"#",onClick:v=>{v.preventDefault(),s(De({id:c.id,elementId:a}))},children:o("Delete")})]})})]})};re.propTypes={elementId:m.string.isRequired,isTextual:m.bool.isRequired,isMedia:m.bool.isRequired,index:m.number.isRequired,rule:m.object.isRequired};const ie=({element:a})=>{const d=E(),[l]=ee();return a.field.validation?e.jsxs("div",{className:"flex-column s-24",children:[e.jsxs("div",{className:"flex-between",children:[e.jsx("label",{className:"form-label",children:o("Field required")}),e.jsx("div",{className:"toggle-group",children:e.jsxs("label",{className:"toggle",children:[e.jsx("input",{id:`required-${a.id}`,name:`required-${a.id}`,type:"checkbox",defaultChecked:a.field.isRequired,onChangeCapture:r=>{d(Oe({id:a.id,value:r.target.checked}))}},`required-${a.id}`),e.jsx("span",{className:"slider round"})]})})]}),(a.field.isTextual||a.field.isMedia)&&e.jsxs(D.Fragment,{children:[e.jsx("div",{className:"flex-column s-24",ref:l,children:a.validationRules.length>0?e.jsx(D.Fragment,{children:a.validationRules.map((r,c)=>e.jsx(re,{elementId:a.id,isTextual:a.field.isTextual,isMedia:a.field.isMedia,rule:r,index:c},r.id))}):e.jsx(G,{style:$.WARNING,children:o('No rules already created. Create the first one now by clicking the button "Add rule"!')})}),e.jsx("a",{href:"#",onClick:r=>{r.preventDefault(),d(Ae({id:a.id,isTextual:a.field.isTextual,isMedia:a.field.isMedia}))},children:o("Add rule")})]})]}):null};ie.propTypes={element:m.object.isRequired};const de=({element:a})=>{const d=E(),[l,r]=S.useState(a.field.name),{register:c,setValue:s}=We({mode:"all"});S.useEffect(()=>{s(`name-${a.id}`,l)},[l]);const h=t=>{const u=Ge(Ue(t));r(u),d(M({id:a.id,key:"name",value:u}))},x=()=>a.field.type!==n.BUTTON&&a.field.type!==n.HIDDEN;return e.jsxs("div",{className:"flex-column s-24",children:[e.jsxs("div",{className:"flex-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:o("Layout")}),e.jsxs("div",{className:"flex s-4",children:[e.jsx("label",{htmlFor:`layout-${a.id}`,className:`acpt-btn-switch ${a.settings.layout==="block"?"active":""}`,onClickCapture:t=>{d(T({id:a.id,key:"layout",value:"block"}))},children:e.jsx(k,{icon:"akar-icons:two-line-vertical",width:18})}),e.jsx("label",{htmlFor:`layout-${a.id}`,className:`acpt-btn-switch ${a.settings.layout==="inline"?"active":""}`,onClickCapture:t=>{d(T({id:a.id,key:"layout",value:"inline"}))},children:e.jsx(k,{icon:"akar-icons:two-line-horizontal",width:18})})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("label",{className:"form-label",children:o("Alignment")}),e.jsxs("div",{className:"flex s-4",children:[e.jsx("label",{htmlFor:`layout-${a.id}`,className:`acpt-btn-switch ${a.settings.alignment==="left"?"active":""}`,onClickCapture:t=>{d(T({id:a.id,key:"alignment",value:"left"}))},children:e.jsx(k,{icon:"bx:align-left",width:18})}),e.jsx("label",{htmlFor:`layout-${a.id}`,className:`acpt-btn-switch ${a.settings.alignment==="center"?"active":""}`,onClickCapture:t=>{d(T({id:a.id,key:"alignment",value:"center"}))},children:e.jsx(k,{icon:"bx:align-middle",width:18})}),e.jsx("label",{htmlFor:`layout-${a.id}`,className:`acpt-btn-switch ${a.settings.alignment==="right"?"active":""}`,onClickCapture:t=>{d(T({id:a.id,key:"alignment",value:"right"}))},children:e.jsx(k,{icon:"bx:align-right",width:18})})]})]})]}),e.jsxs("div",{className:`name-${a.id}`,children:[e.jsx("label",{className:"form-label",htmlFor:`name-${a.id}`,children:o("Name")}),e.jsx("input",{className:"form-control",name:`name-${a.id}`,id:`name-${a.id}`,defaultValue:a.field.name,disabled:a.field.isReusable===!1,...c(`name-${a.id}`),onChangeCapture:t=>{h(t.target.value)}},`name-${a.id}`)]}),e.jsxs("div",{className:`cols-${a.id}`,children:[e.jsx("label",{className:"form-label",htmlFor:`cols-${a.id}`,children:o("Columns")}),e.jsx("div",{className:"acpt-select",children:e.jsxs("select",{name:`cols-${a.id}`,className:"form-control",id:`cols-${a.id}`,defaultValue:a.settings.cols,onChangeCapture:t=>{d(T({id:a.id,key:"cols",value:t.target.value}))},children:[e.jsx("option",{value:"3",children:"3"}),e.jsx("option",{value:"4",children:"4"}),e.jsx("option",{value:"6",children:"6"}),e.jsx("option",{value:"8",children:"8"}),e.jsx("option",{value:"9",children:"9"}),e.jsx("option",{value:"12",children:"12"})]},`cols-${a.id}`)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"ID"}),e.jsx(He,{text:a.id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:`css-${a.id}`,children:o("CSS classes")}),e.jsx("input",{className:"form-control",name:"css",id:`css-${a.id}`,defaultValue:a.settings.css,onChangeCapture:t=>{d(T({id:a.id,key:"css",value:t.target.value}))}},`css-${a.id}`)]}),x()&&e.jsxs(D.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:`label-${a.id}`,children:o("Label")}),e.jsx("input",{className:"form-control",name:"label",id:`label-${a.id}`,defaultValue:a.field.label,onChangeCapture:t=>{d(M({id:a.id,key:"label",value:t.target.value}))}},`label-${a.id}`)]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:`description-${a.id}`,children:o("Description")}),e.jsx("textarea",{className:"form-control",name:"description",id:`description-${a.id}`,cols:30,rows:6,defaultValue:a.field.description,onChangeCapture:t=>{d(M({id:a.id,key:"description",value:t.target.value}))}},`description-${a.id}`)]})]})]})};de.propTypes={element:m.object.isRequired};const ne=({elementId:a,option:d,optionIndex:l})=>{const r=E(),c=h=>{const x={...d};x.value=h,r(B({elementId:a,optionIndex:l,option:x}))},s=h=>{const x={...d};x.label=h,r(B({elementId:a,optionIndex:l,option:x}))};return e.jsxs("div",{className:"i-flex-center s-8",children:[e.jsx("div",{className:"w-100",children:e.jsx("input",{type:"text",className:"form-control",defaultValue:d.label,onChangeCapture:h=>s(h.target.value)})}),e.jsx("div",{className:"w-100",children:e.jsx("input",{type:"text",className:"form-control",defaultValue:d.value,onChangeCapture:h=>c(h.target.value)})}),e.jsx("a",{href:"#",onClick:h=>{h.preventDefault(),r(Ie({id:d.id,elementId:a}))},children:e.jsx(Ye,{icon:!1,tip:o("Delete"),label:e.jsx(k,{icon:"bx-trash",width:18,color:"#F94144"})})})]})};ne.propTypes={elementId:m.string.isRequired,optionIndex:m.number.isRequired,option:m.object.isRequired};const ce=({elementId:a})=>{const d=E(),[l,r]=S.useState(!1),[c,s]=S.useState(null),[h,x]=S.useState(null),[t,u]=S.useState(!1);S.useEffect(()=>{t&&(r(!0),J("fetchDatasetsAction",{}).then(f=>{let b=[{value:null,label:o("Select"),items:[]}];f.records&&f.records.map(i=>{b.push({value:i.id,label:i.label?i.label:i.name,items:i.items?i.items:[]})}),s(b),r(!1)}).catch(f=>{console.error(f.message),r(!1)}))},[t]);const p=()=>{const f=c.filter(i=>i.value===h);if(f.length!==1)return;const b=f[0].items;console.log(b),b.map(i=>{d(Q({elementId:a,label:i.label,value:i.value}))}),H.success(o("Dataset loaded correctly")),u(!t)},g=[e.jsx(_,{style:$.PRIMARY,disabled:h===null,onClick:f=>{f.preventDefault(),p()},children:o("Load dataset")}),e.jsx(_,{style:$.DANGER,onClick:f=>{f.preventDefault(),u(!t)},children:o("Close")})];return e.jsxs(D.Fragment,{children:[e.jsx(ze,{title:o("Load dataset"),visible:t,padding:0,buttons:g,children:l?e.jsx("div",{className:"p-24",children:o("Loading...")}):e.jsx("div",{className:"p-24",children:e.jsx("select",{id:"dataset",className:"form-control default",onChangeCapture:f=>x(f.target.value),children:c&&c.map(f=>e.jsx("option",{value:f.value,children:f.label}))})})}),e.jsx("a",{href:"#",onClick:f=>{f.preventDefault(),u(!t)},children:o("Load dataset")})]})};ce.propTypes={elementId:m.string.isRequired};const oe=({elementId:a,options:d})=>{const l=E(),[r]=ee();return e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:`options-${a}`,children:o("Options")}),e.jsxs("div",{className:"flex-column s-8",ref:r,children:[d&&d.length>0?e.jsx(D.Fragment,{children:d.map((c,s)=>e.jsx(ne,{elementId:a,option:c,optionIndex:s},s))}):e.jsx(G,{style:$.WARNING,children:o('No options already created. Create the first one now by clicking the button "Add option"!')}),e.jsxs("div",{className:"mt-24 i-flex-center s-8",children:[e.jsx("a",{href:"#",onClick:c=>{c.preventDefault(),l(Q({elementId:a}))},children:o("Add option")}),e.jsx(ce,{elementId:a})]})]})]})};oe.propTypes={elementId:m.string.isRequired,options:m.array.isRequired};const ue=({element:a})=>{const l=document.globals.settings,r=E(),c=a.field.type,s=a.field.extra,h=()=>{let t=[];switch(c){case n.FILE:t.push("multiple"),t.push("accept");break;case n.NUMBER:t.push("disabled"),t.push("defaultValue"),t.push("placeholder"),t.push("min"),t.push("max"),t.push("step");break;case n.RANGE:t.push("disabled"),t.push("defaultValue"),t.push("min"),t.push("max"),t.push("step");break;case n.RADIO:case n.CHECKBOX:t.push("nullValue"),t.push("disabled"),t.push("defaultValue"),t.push("placeholder"),t.push("options");break;case n.SELECT:t.push("isMulti"),t.push("nullValue"),t.push("disabled"),t.push("defaultValue"),t.push("placeholder"),t.push("options");break;case n.WORDPRESS_USER_BIO:case n.WORDPRESS_TERM_DESCRIPTION:case n.WORDPRESS_POST_CONTENT:case n.WORDPRESS_POST_EXCERPT:case n.TEXTAREA:t.push("disabled"),t.push("defaultValue"),t.push("placeholder"),t.push("wysiwyg"),t.push("rows"),t.push("cols");break;case n.BUTTON:t.push("disabled"),t.push("type"),t.push("label");break;case n.DATE_RANGE:t.push("disabled"),t.push("defaultValue"),t.push("minDate"),t.push("maxDate");break;case n.ICON:case n.RATING:case n.HIDDEN:t.push("defaultValue");break;case n.WORDPRESS_POST_TAXONOMIES:t.push("isMulti"),t.push("nullValue"),t.push("disabled"),t.push("defaultValue"),t.push("placeholder");break;case n.WORDPRESS_POST_AUTHOR:t.push("nullValue"),t.push("disabled"),t.push("defaultValue"),t.push("placeholder");break;case n.TOGGLE:t.push("disabled"),t.push("checked");break;case n.CURRENCY:case n.LENGTH:case n.WEIGHT:t.push("uom"),t.push("disabled"),t.push("defaultValue"),t.push("placeholder");break;case n.CAPTCHA:t.push("googleSiteKey"),t.push("googleSecretKey");break;case n.TURNSTILE:t.push("turnstileSiteKey"),t.push("turnstileSecretKey");break;case n.URL:t.push("hideLabel"),t.push("disabled"),t.push("defaultValue"),t.push("placeholder"),t.push("labelDefaultValue"),t.push("labelPlaceholder");break;default:t.push("disabled"),t.push("defaultValue"),t.push("placeholder");break}return t},x=t=>{switch(t){case"accept":return e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:`accept-${a.id}`,children:o("Accept")}),e.jsx("input",{className:"form-control",name:"accept",type:"text",id:`accept-${a.id}`,defaultValue:s.accept,onChangeCapture:i=>{r(N({id:a.id,key:"accept",value:i.target.value}))}},`accept-${a.id}`)]});case"checked":return e.jsxs("div",{className:"flex-between",children:[e.jsx("label",{className:"form-label",children:o("Default value")}),e.jsx("div",{className:"toggle-group",children:e.jsxs("label",{className:"toggle",children:[e.jsx("input",{id:`checked-${a.id}`,name:`checked-${a.id}`,type:"checkbox",defaultChecked:s.checked,onChangeCapture:i=>{r(N({id:a.id,key:"checked",value:i.target.checked}))}},`checked-${a.id}`),e.jsx("span",{className:"slider round"})]})})]});case"cols":return e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:`rows-${a.id}`,children:o("Cols value")}),e.jsx("input",{className:"form-control",name:"cols",type:"number",id:`cols-${a.id}`,defaultValue:s.cols,onChangeCapture:i=>{r(N({id:a.id,key:"cols",value:i.target.value}))}},`cols-${a.id}`)]});case"defaultValue":return e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:`defaultValue-${a.id}`,children:o("Default value")}),e.jsx("input",{className:"form-control",name:"defaultValue",id:`defaultValue-${a.id}`,defaultValue:s.defaultValue,onChangeCapture:i=>{r(N({id:a.id,key:"defaultValue",value:i.target.value}))}},`defaultValue-${a.id}`)]});case"disabled":return e.jsxs("div",{className:"flex-between",children:[e.jsx("label",{className:"form-label",children:o("Disabled")}),e.jsx("div",{className:"toggle-group",children:e.jsxs("label",{className:"toggle",children:[e.jsx("input",{id:`checked-${a.id}`,name:`checked-${a.id}`,type:"checkbox",defaultChecked:s.disabled?s.disabled:!1,onChangeCapture:i=>{r(N({id:a.id,key:"disabled",value:i.target.checked}))}},`checked-${a.id}`),e.jsx("span",{className:"slider round"})]})})]});case"googleSiteKey":const u=()=>{if(s.googleSiteKey&&s.googleSiteKey!=="")return s.googleSiteKey;const i=P(l,"key","google_recaptcha_site_key");return i?i.value:null};return e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:`googleSiteKey-${a.id}`,children:o("Your Google reCAPTCHA site key")}),e.jsx("input",{className:"form-control",name:"googleSiteKey",type:"text",id:`googleSiteKey-${a.id}`,defaultValue:u(),onChangeCapture:i=>{r(N({id:a.id,key:"googleSiteKey",value:i.target.value}))}},`googleSiteKey-${a.id}`)]});case"googleSecretKey":const p=()=>{if(s.googleSecretKey&&s.googleSecretKey!=="")return s.googleSecretKey;const i=P(l,"key","google_recaptcha_secret_key");return i?i.value:null};return e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:`googleSecretKey-${a.id}`,children:o("Your Google reCAPTCHA secret key")}),e.jsx("input",{className:"form-control",name:"googleSecretKey",type:"text",id:`googleSecretKey-${a.id}`,defaultValue:p(),onChangeCapture:i=>{r(N({id:a.id,key:"googleSecretKey",value:i.target.value}))}},`googleSecretKey-${a.id}`)]});case"hideLabel":return e.jsxs("div",{className:"flex-between",children:[e.jsx("label",{className:"form-label",children:o("Hide the label")}),e.jsx("div",{className:"toggle-group",children:e.jsxs("label",{className:"toggle",children:[e.jsx("input",{id:`hideLabel-${a.id}`,name:`hideLabel-${a.id}`,type:"checkbox",defaultChecked:s.hideLabel,onChangeCapture:i=>{r(N({id:a.id,key:"hideLabel",value:i.target.checked}))}},`hideLabel-${a.id}`),e.jsx("span",{className:"slider round"})]})})]});case"isMulti":return e.jsxs("div",{className:"flex-between",children:[e.jsx("label",{className:"form-label",children:o("Multiple field")}),e.jsx("div",{className:"toggle-group",children:e.jsxs("label",{className:"toggle",children:[e.jsx("input",{id:`isMulti-${a.id}`,name:`isMulti-${a.id}`,type:"checkbox",defaultChecked:s.isMulti,onChangeCapture:i=>{r(N({id:a.id,key:"isMulti",value:i.target.checked}))}},`isMulti-${a.id}`),e.jsx("span",{className:"slider round"})]})})]});case"labelDefaultValue":return e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:`labelDefaultValue-${a.id}`,children:o("Label default value")}),e.jsx("input",{className:"form-control",name:"labelDefaultValue",type:"text",id:`labelDefaultValue-${a.id}`,defaultValue:s.labelDefaultValue,onChangeCapture:i=>{r(N({id:a.id,key:"labelDefaultValue",value:i.target.value}))}},`labelDefaultValue-${a.id}`)]});case"labelPlaceholder":return e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:`labelPlaceholder-${a.id}`,children:o("Label placeholder")}),e.jsx("input",{className:"form-control",name:"labelPlaceholder",type:"text",id:`labelPlaceholder-${a.id}`,defaultValue:s.labelPlaceholder,onChangeCapture:i=>{r(N({id:a.id,key:"labelPlaceholder",value:i.target.value}))}},`labelPlaceholder-${a.id}`)]});case"turnstileSiteKey":const g=()=>{if(s.turnstileSiteKey&&s.turnstileSiteKey!=="")return s.turnstileSiteKey;const i=P(l,"key","cloudflare_turnstile_site_key");return i?i.value:null};return e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:`turnstileSiteKey-${a.id}`,children:o("Your Cloudflare Turnstile site key")}),e.jsx("input",{className:"form-control",name:"turnstileSiteKey",type:"text",id:`turnstileSiteKey-${a.id}`,defaultValue:g(),onChangeCapture:i=>{r(N({id:a.id,key:"turnstileSiteKey",value:i.target.value}))}},`turnstileSiteKey-${a.id}`)]});case"turnstileSecretKey":const f=()=>{if(s.turnstileSecretKey&&s.turnstileSecretKey!=="")return s.turnstileSecretKey;const i=P(l,"key","cloudflare_turnstile_secret_key");return i?i.value:null};return e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:`turnstileSecretKey-${a.id}`,children:o("Your Cloudflare Turnstile secret key")}),e.jsx("input",{className:"form-control",name:"turnstileSecretKey",type:"text",id:`turnstileSecretKey-${a.id}`,defaultValue:f(),onChangeCapture:i=>{r(N({id:a.id,key:"turnstileSecretKey",value:i.target.value}))}},`turnstileSecretKey-${a.id}`)]});case"label":return e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:`label-${a.id}`,children:o("Label")}),e.jsx("input",{className:"form-control",name:"label",type:"text",id:`label-${a.id}`,defaultValue:s.label,onChangeCapture:i=>{r(N({id:a.id,key:"label",value:i.target.value}))}},`label-${a.id}`)]});case"max":return e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:`min-${a.id}`,children:o("Maximum value")}),e.jsx("input",{className:"form-control",name:"max",type:"number",id:`max-${a.id}`,defaultValue:s.max,onChangeCapture:i=>{r(N({id:a.id,key:"max",value:i.target.value}))}},`max-${a.id}`)]});case"maxDate":return e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:o("Maximum date")}),e.jsx("input",{className:"form-control",name:"maxDate",type:"date",id:`maxDate-${a.id}`,defaultValue:s.maxDate,onChangeCapture:i=>{r(N({id:a.id,key:"maxDate",value:i.target.value}))}},`maxDate-${a.id}`)]});case"min":return e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:`min-${a.id}`,children:o("Minimum value")}),e.jsx("input",{className:"form-control",name:"min",type:"number",id:`min-${a.id}`,defaultValue:s.min,onChangeCapture:i=>{r(N({id:a.id,key:"min",value:i.target.value}))}},`min-${a.id}`)]});case"minDate":return e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:o("Minimum date")}),e.jsx("input",{className:"form-control",name:"minDate",type:"date",id:`minDate-${a.id}`,defaultValue:s.minDate,onChangeCapture:i=>{r(N({id:a.id,key:"minDate",value:i.target.value}))}},`minDate-${a.id}`)]});case"multiple":return e.jsxs("div",{className:"flex-between",children:[e.jsx("label",{className:"form-label",children:o("Multiple")}),e.jsx("div",{className:"toggle-group",children:e.jsxs("label",{className:"toggle",children:[e.jsx("input",{id:`multiple-${a.id}`,name:`multiple-${a.id}`,type:"checkbox",defaultChecked:s.multiple,onChangeCapture:i=>{r(N({id:a.id,key:"multiple",value:i.target.checked}))}},`multiple-${a.id}`),e.jsx("span",{className:"slider round"})]})})]});case"nullValue":return e.jsxs("div",{className:"flex-between",children:[e.jsx("label",{className:"form-label",children:o("Allow empty value")}),e.jsx("div",{className:"toggle-group",children:e.jsxs("label",{className:"toggle",children:[e.jsx("input",{id:`empty-${a.id}`,name:`empty-${a.id}`,type:"checkbox",defaultChecked:s.empty,onChangeCapture:i=>{r(N({id:a.id,key:"empty",value:i.target.checked}))}},`empty-${a.id}`),e.jsx("span",{className:"slider round"})]})})]});case"options":return e.jsx(oe,{elementId:a.id,options:s.options});case"placeholder":return e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:`placeholder-${a.id}`,children:o("Placeholder")}),e.jsx("input",{className:"form-control",name:"placeholder",id:`placeholder-${a.id}`,defaultValue:s.placeholder,onChangeCapture:i=>{r(N({id:a.id,key:"placeholder",value:i.target.value}))}},`placeholder-${a.id}`)]});case"rows":return e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:`rows-${a.id}`,children:o("Rows value")}),e.jsx("input",{className:"form-control",name:"rows",type:"number",id:`rows-${a.id}`,defaultValue:s.rows,onChangeCapture:i=>{r(N({id:a.id,key:"rows",value:i.target.value}))}},`rows-${a.id}`)]});case"step":return e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:`step-${a.id}`,children:o("Step value")}),e.jsx("input",{className:"form-control",name:"step",type:"number",id:`step-${a.id}`,defaultValue:s.step,onChangeCapture:i=>{r(N({id:a.id,key:"step",value:i.target.value}))}},`step-${a.id}`)]});case"type":return e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:`type-${a.id}`,children:o("Type value")}),e.jsxs("select",{className:"form-control",name:"type",defaultValue:s.type,onChangeCapture:i=>{r(N({id:a.id,key:"type",value:i.target.value}))},children:[e.jsx("option",{value:"submit",children:"submit"}),e.jsx("option",{value:"reset",children:"reset"}),e.jsx("option",{value:"button",children:"button"})]})]});case"uom":if(!a.field&&!a.field.type)return null;let b=[];switch(a.field.type){case n.CURRENCY:b=document.globals.globals.uom.currency;break;case n.LENGTH:b=document.globals.globals.uom.length;break;case n.WEIGHT:b=document.globals.globals.uom.weight;break}return b.length===0?null:e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:o("UOM default value")}),e.jsx("select",{className:"form-control",name:"uom",id:`uom-${a.id}`,defaultValue:s.uom,onChangeCapture:i=>{r(N({id:a.id,key:"uom",value:i.target.value}))},children:b&&b.map((i,R)=>e.jsx("option",{value:i.value,children:i.label},R))},`uom-${a.id}`)]});case"wysiwyg":return e.jsxs("div",{className:"flex-between",children:[e.jsx("label",{className:"form-label",children:o("Enable editor")}),e.jsx("div",{className:"toggle-group",children:e.jsxs("label",{className:"toggle",children:[e.jsx("input",{id:`wysiwyg-${a.id}`,name:`wysiwyg-${a.id}`,type:"checkbox",defaultChecked:s.wysiwyg,onChangeCapture:i=>{r(N({id:a.id,key:"wysiwyg",value:i.target.checked}))}},`wysiwyg-${a.id}`),e.jsx("span",{className:"slider round"})]})})]})}return null};return e.jsx("div",{className:"flex-column s-24",children:h().map(t=>x(t))})};ue.propTypes={element:m.object.isRequired};const Je=()=>{const a=E(),{activeElement:d,elements:l}=V(s=>s.formManager),r=d.id,c=()=>{const s=l.filter(h=>h.id===r);return s.length===1?s[0]:null};return c()?e.jsxs(D.Fragment,{children:[e.jsxs("div",{className:"p-24 flex-between b-bottom-1",children:[e.jsxs("span",{className:"i-flex-center s-8",children:[e.jsx("span",{className:"color-black text-ellipsis",children:c().field.name}),e.jsx(Be,{fieldType:c().field.type})]}),e.jsx("a",{href:"#",onClick:s=>{s.preventDefault(),a(U())},children:e.jsx(k,{icon:"bx:x",width:24,color:"#1d2327"})})]}),e.jsx("div",{className:"p-24",children:e.jsxs(Ke,{children:[e.jsx(q,{title:o("Settings"),children:e.jsx(de,{element:c()})}),e.jsx(q,{title:o("Extra"),children:e.jsx(ue,{element:c()})}),c().field.validation&&e.jsx(q,{title:o("Validation"),children:e.jsx(ie,{element:c()})})]})})]}):null},Qe=()=>{const a=E(),{form:d}=V(u=>u.formManager),l=u=>{if(!d||!d.meta)return null;const p=d.meta.filter(g=>g.key===u);return p.length===1&&p[0].value?p[0].value:null},r=document.globals.globals.find,c=l("fill_meta_location_belong"),s=l("fill_meta_location_find"),h=l("fill_meta_location_item"),x=()=>{let u=[];switch(c){case K.CUSTOM_POST_TYPE:const p=r.POST_ID.filter(f=>s===f.label);p.length===1&&p[0].options&&(u=p[0].options);break;case K.TAXONOMY:const g=r.TERM_ID.filter(f=>s===f.label);g.length===1&&g[0].options&&(u=g[0].options);break;case K.USER:u=r.USER_ID.filter(f=>f.value!==null);break}return u},t=u=>{a(Y({id:u,belong:c,find:s}))};return S.useEffect(()=>{d&&d.meta&&a(Y({id:h,belong:c,find:s}))},[d]),!d||x().length===0?null:e.jsx("div",{className:"mb-24",children:e.jsx("div",{className:"acpt-select",children:e.jsxs("select",{defaultValue:h,className:"form-control",onChange:u=>{u.preventDefault(),t(u.target.value)},children:[e.jsx("option",{value:null,children:o("Preview element")}),x()&&x().map((u,p)=>e.jsx("option",{value:u.value,children:u.label},p))]})})})},he=({fields:a})=>{const{activeElement:d}=V(l=>l.formManager);return e.jsxs("div",{className:"col-3",children:[e.jsx(Qe,{}),e.jsx("div",{className:"with-shadow bg-white b-rounded",children:d?e.jsx(Je,{}):e.jsx(te,{fields:a})})]})};he.propTypes={fields:m.array.isRequired};const ea=()=>{const{elements:a}=V(h=>h.formManager),[d,l]=S.useState(null);if(ye({onDragStart:h=>{l(h.active)},onDragCancel:h=>{l(null)},onDragEnd:h=>{l(null)}}),!d)return null;let r=e.jsx("div",{children:"No drag overlay"});const c=d.data.current.fromSidebar,s=d.data.current.fromCanvas;if(c&&(r=e.jsx(I,{field:d.data.current.field,mode:"overlay"})),s){const h=a.filter(x=>x.id===d.id);h.length===1&&(r=e.jsx(I,{field:h[0].field,mode:"dragging"}))}return e.jsx(Ne,{children:r})},$a=()=>{const{id:a}=be(),d=E(),{elements:l}=V(p=>p.formManager),{data:r}=V(p=>p.fetchFormFields),c=S.useRef(null);ge([c],()=>{document.getElementsByClassName("acpt-overlay").length>0||d(U())}),S.useEffect(()=>{je(),Pe(o("Form manager")),d(_e(a)).then(p=>{const g=p.payload.saved;let f=[];typeof g=="object"&&g.length>0&&g.map(b=>{const i={id:b.id,metaFieldId:b.metaFieldId,group:b.group,name:b.name,label:b.label,description:b.description,type:b.type,isRequired:b.isRequired,validation:b.validation,isTextual:b.isTextual,isMedia:b.isMedia,extra:b.extra},R={id:b.key,field:i,previewItem:e.jsx(A,{element:{field:i}}),settings:b.settings,validationRules:b.validationRules,fromSidebar:!0};f.push(R)}),d(L({elements:f})),d(Fe({form:p.payload.form}))})},[a]);const s=Ce(ke($e)),h=p=>{const{active:g,over:f}=p;if(!g||!f)return;const b=g.data.current.fromSidebar,i=g.data.current.fromCanvas;if(b){const R=f.id,v=z(8);d(Le({element:{id:v,...g.data.current},position:R}))}if(i){const R=f.id.split("-");let v=R[0];const j=l.findIndex(w=>w.id===g.id);let y=l.findIndex(w=>w.id===v);(R[1]==="bottom"||R[1]==="right")&&(y=y+1);const C=Ee(l,j,y);d(L({elements:C}))}},x=()=>{d(qe({id:a,data:l})).then(p=>{const g=p.payload;g.success?H.success(o("Form successfully saved")):H.error(g.error)})};if(!r.fields)return e.jsx(Me,{});const t=[e.jsx(_,{testId:"save-form",style:$.PRIMARY,onClick:()=>{x()},children:o("Save")}),e.jsx(_,{style:$.DANGER,onClick:()=>{d(L({elements:[]}))},children:o("Reset fields")})],u=e.jsxs("div",{className:"i-flex-center s-8",children:[e.jsx("h1",{children:e.jsx("span",{children:r.form.label})}),e.jsx("span",{className:"font-regular text-normal",children:e.jsx("span",{className:"color-gray",children:r.form.name})}),e.jsx(Xe,{mode:"edit",classButton:"acpt-btn acpt-btn-secondary acpt-btn-sm",record:r.form})]});return e.jsx(ve,{actions:t,title:u,crumbs:[{label:o("Forms list"),link:"/forms"},{label:o("Form manager")}],children:e.jsxs(Re,{onDragEnd:h,collisionDetection:Se,sensors:s,autoScroll:!0,children:[e.jsxs("div",{className:"container",ref:c,children:[e.jsx(he,{fields:r.fields}),e.jsx(Ze,{})]}),e.jsx(ea,{})]})})};export{$a as default};
