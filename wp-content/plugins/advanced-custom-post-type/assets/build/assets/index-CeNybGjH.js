import{j as e,u as t}from"./fields-Cqw4NA-S.js";import{a as y}from"./vendor-D21mNUGX.js";import{n as v,f as Z,a as J,L as W}from"./Layout-DCNQQmUm.js";import{P as i,B as H,s as j,G as X,a as $,u as ee,m as te,c as se,c5 as r,F as ae,c6 as le}from"./index-DxCcoVgy.js";import{u as h,c as oe,F as ne}from"./index.esm-CunHohLK.js";import{T as re,a as b}from"./index-WYQ2JGQs.js";import{C as m,a as o}from"./CardRow-BUjSt7Qo.js";import{S as M}from"./Select-DQFFBRh5.js";import{I as f}from"./Input-CuPRbCrx.js";import{T as g}from"./Toggle-me_yLPe1.js";import{e as ie}from"./validation-D-MLcBjP.js";const ue=[{label:"Default",value:"Default"},{label:"Inter",value:"Inter"},{label:"Lato",value:"Lato"},{label:"Open Sans",value:"Open Sans"},{label:"Poppins",value:"Poppins"},{label:"Roboto",value:"Roboto"},{label:"Ubuntu",value:"Ubuntu"}],N=({language:u,font:p,records_per_page:c})=>{const d=document.globals,{register:s,formState:{errors:l}}=h();return e.jsxs(m,{children:[e.jsx(o,{label:t("Language"),value:e.jsx(M,{id:"language",label:t("Language"),placeholder:t("Set the language of the plug-in"),description:t("Set the language of the plug-in"),register:s,defaultValue:u,values:d.globals.available_languages,isRequired:!0,errors:l,validate:{required:"This field is mandatory"}})}),e.jsx(o,{label:t("Font"),value:e.jsx(M,{id:"font",label:t("Font"),placeholder:t("Set the font of the plug-in"),description:t("Set the font of the plug-in"),register:s,defaultValue:p,values:ue,isRequired:!0,errors:l,validate:{required:"This field is mandatory"}})}),e.jsx(o,{label:t("Records per page"),value:e.jsx(f,{type:"number",id:"records_per_page",description:t("Set the number of records per page in your ACPT dashboards."),register:s,errors:l,isRequired:!0,defaultValue:c,min:1,max:200,validate:{required:"This field is mandatory"}})})]})};N.propTypes={language:i.string,font:i.string,records_per_page:i.number};const O=({enable_cpt:u,enable_tax:p,enable_op:c,enable_meta:d,enable_forms:s})=>{const{register:l,formState:{errors:_}}=h();return e.jsxs(m,{children:[e.jsx(o,{label:t("Enable custom post types"),value:e.jsx(g,{id:"enable_cpt",description:t("Enable the custom post types manager."),register:l,errors:_,defaultValue:u})}),e.jsx(o,{label:t("Enable taxonomies"),value:e.jsx(g,{id:"enable_tax",description:t("Enable the taxonomies manager."),register:l,errors:_,defaultValue:p})}),e.jsx(o,{label:t("Enable Option Pages"),value:e.jsx(g,{id:"enable_op",description:t("Enable the Option Pages manager."),register:l,errors:_,defaultValue:c})}),e.jsx(o,{label:t("Enable meta fields"),value:e.jsx(g,{id:"enable_meta",description:t("Enable the meta fields manager."),register:l,errors:_,defaultValue:d})}),e.jsx(o,{label:t("Enable forms"),value:e.jsx(g,{id:"enable_forms",description:t("Enable the form builder."),register:l,errors:_,defaultValue:s})})]})};O.propTypes={enable_cpt:i.bool,enable_tax:i.bool,enable_op:i.bool,enable_meta:i.bool,enable_forms:i.bool};const B=({google_maps_api_key:u,google_recaptcha_site_key:p,google_recaptcha_secret_key:c,cloudflare_turnstile_site_key:d,cloudflare_turnstile_secret_key:s})=>{const{register:l,formState:{errors:_}}=h();return e.jsxs(m,{children:[e.jsx(o,{label:t("Google Maps API key"),value:e.jsx(f,{id:"google_maps_api_key",description:t("Paste here your Google Maps API key. Needed to use the Address meta field."),register:l,errors:_,isRequired:!1,defaultValue:u,validate:{validate:ie}})}),e.jsx(o,{label:t("Your Google reCAPTCHA site key"),value:e.jsx(f,{id:"google_recaptcha_site_key",description:t("Your Google reCAPTCHA site key. Needed to use the CAPTCHA form field."),register:l,errors:_,defaultValue:p,isRequired:!1})}),e.jsx(o,{label:t("Your Google reCAPTCHA secret key"),value:e.jsx(f,{id:"google_recaptcha_secret_key",description:t("Your Google reCAPTCHA secret key. Needed to use the CAPTCHA form field."),register:l,errors:_,defaultValue:c,isRequired:!1})}),e.jsx(o,{label:t("Your Cloudflare Turnstile site key"),value:e.jsx(f,{id:"cloudflare_turnstile_site_key",description:t("Your Cloudflare Turnstile site key. Needed to use the CAPTCHA form field."),register:l,errors:_,defaultValue:d,isRequired:!1})}),e.jsx(o,{label:t("Your Cloudflare Turnstile secret key"),value:e.jsx(f,{id:"cloudflare_turnstile_secret_key",description:t("Your Cloudflare Turnstile secret key. Needed to use the CAPTCHA form field."),register:l,errors:_,defaultValue:s,isRequired:!1})})]})};B.propTypes={google_maps_api_key:i.string,google_recaptcha_site_key:i.string,google_recaptcha_secret_key:i.string,cloudflare_turnstile_site_key:i.string,cloudflare_turnstile_secret_key:i.string};const U=({enable_cache:u})=>{const{register:p,formState:{errors:c}}=h(),d=()=>{X("flushCacheAction",{}).then(s=>{s.success===!0?v.success(t("Cache was successfully flushed")):v.error(s.error)}).catch(s=>console.error(s))};return e.jsxs(m,{children:[e.jsx(o,{label:t("Enable ACPT cache"),value:e.jsx(g,{id:"enable_cache",description:t("Enable the ACPT cache. The cache stores the MySQL results in simple textual files to avoid useless DB calls."),register:p,errors:c,defaultValue:u})}),u?e.jsx(o,{label:t("Flush the ACPT cache"),value:e.jsx(H,{style:j.SECONDARY,onClick:s=>{s.preventDefault(),d()},children:t("Flush cache")})}):null]})};U.propTypes={enable_cache:i.bool};const z=({delete_tables_when_deactivate:u,delete_posts:p,delete_metadata:c})=>{const{register:d,formState:{errors:s}}=h();return e.jsxs(m,{children:[e.jsx(o,{label:t("Delete ACPT definitions when deactivate the plug-in"),value:e.jsx(g,{id:"delete_tables_when_deactivate",description:t("Delete all saved ACPT definitions when you deactivate the plug-in. This means that if you select NO when you deactivate and then reactivate the plug-in you will find all the previously saved ACPT definitions (meta fields, options etc.)"),register:d,errors:s,defaultValue:u})}),e.jsx(o,{label:t("Delete posts when delete an ACPT post definition"),value:e.jsx(g,{id:"delete_posts",description:t("   Delete posts when delete an ACPT post type definition. This means that if you select YES, when you delete an ACPT post type definition all the saved posts will be deleted"),register:d,errors:s,defaultValue:p})}),e.jsx(o,{label:t("Delete metadata when delete an ACPT field"),value:e.jsx(g,{id:"delete_metadata",description:t("Delete post metadata when deleting an ACPT field. This means that if you select YES, when you delete an ACPT meta field all the saved metadata will be deleted"),register:d,errors:s,defaultValue:c})})]})};z.propTypes={delete_tables_when_deactivate:i.bool,delete_posts:i.bool,delete_metadata:i.bool};const ve=()=>{const{error:u,success:p,loading:c}=$(a=>a.saveSettings),d=ee(),[s,l]=y.useState(!1);y.useEffect(()=>{te(t("Settings page")),se("#/settings"),Z()},[]);const n=document.globals.settings,T=r("delete_metadata",n,0),C=r("delete_posts",n,0),k=r("delete_tables_when_deactivate",n,0),S=r("enable_cache",n,1),A=r("enable_forms",n,0),P=r("enable_cpt",n,1),E=r("enable_tax",n,1),w=r("enable_op",n,1),V=r("enable_meta",n,1),R=r("font",n,"Inter"),D=r("cloudflare_turnstile_site_key",n,""),q=r("cloudflare_turnstile_secret_key",n,""),F=r("google_recaptcha_site_key",n,""),Y=r("google_recaptcha_secret_key",n,""),G=r("google_maps_api_key",n,""),L=r("language",n,"en_US"),I=r("records_per_page",n,20),x=oe({mode:"all",defaultValues:{enable_cache:S,enable_forms:A,enable_cpt:P,enable_tax:E,enable_op:w,enable_meta:V,delete_metadata:T,delete_posts:C,delete_tables_when_deactivate:k,records_per_page:I,google_maps_api_key:G,google_recaptcha_site_key:F,google_recaptcha_secret_key:Y,cloudflare_turnstile_site_key:D,cloudflare_turnstile_secret_key:q,language:L,font:R}}),K=a=>{d(le({records_per_page:a.records_per_page,enable_cache:a.enable_cache?1:0,enable_forms:a.enable_forms?1:0,enable_cpt:a.enable_cpt?1:0,enable_tax:a.enable_tax?1:0,enable_op:a.enable_op?1:0,enable_meta:a.enable_meta?1:0,delete_tables_when_deactivate:a.delete_tables_when_deactivate?1:0,delete_posts:a.delete_posts?1:0,delete_metadata:a.delete_metadata?1:0,google_maps_api_key:a.google_maps_api_key,google_recaptcha_site_key:a.google_recaptcha_site_key,google_recaptcha_secret_key:a.google_recaptcha_secret_key,cloudflare_turnstile_site_key:a.cloudflare_turnstile_site_key,cloudflare_turnstile_secret_key:a.cloudflare_turnstile_secret_key,language:a.language?a.language:null,font:a.font?a.font:null})),l(!0)};y.useEffect(()=>{s&&p&&(J("Settings saved."),ae()),s&&u!==null&&v.error(u),s&&l(!1)},[c]);const Q=[e.jsx(H,{testId:"save-settings",style:j.PRIMARY,disabled:!!(!x.formState.isValid||c),children:c?t("Loading..."):t("Save")})];return e.jsx(ne,{...x,children:e.jsx("form",{onSubmit:x.handleSubmit(K),children:e.jsx(W,{crumbs:[{label:t("Settings")}],title:t("Settings"),actions:Q,children:e.jsxs(re,{halfMargin:!0,children:[e.jsx(b,{title:t("General settings"),children:e.jsx(N,{font:R,language:L,records_per_page:I})}),e.jsx(b,{title:t("Content settings"),children:e.jsx(O,{enable_cpt:P,enable_forms:A,enable_meta:V,enable_op:w,enable_tax:E})}),e.jsx(b,{title:t("Connect external services"),children:e.jsx(B,{google_maps_api_key:G,google_recaptcha_site_key:F,google_recaptcha_secret_key:Y,cloudflare_turnstile_site_key:D,cloudflare_turnstile_secret_key:q})}),e.jsx(b,{title:t("Performances"),children:e.jsx(U,{enable_cache:S})}),e.jsx(b,{style:j.DANGER,title:t("Danger zone"),children:e.jsx(z,{delete_tables_when_deactivate:k,delete_posts:C,delete_metadata:T})})]})})})})};export{ve as default};
